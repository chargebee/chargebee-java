/*
 * This file is auto-generated by Chargebee.
 * For more information on how to make changes to this file, please see the README.
 * Reach out to dx@chargebee.com for any questions.
 * Copyright 2025 Chargebee Inc.
 */

package com.chargebee.v4.services;

import com.chargebee.v4.client.ChargebeeClient;
import com.chargebee.v4.client.request.RequestOptions;
import com.chargebee.v4.transport.Response;

import com.chargebee.v4.models.estimate.params.EstimateCreateSubscriptionForItemsParams;

import com.chargebee.v4.models.estimate.params.EstimatePaymentSchedulesParams;

import com.chargebee.v4.models.estimate.params.CancelSubscriptionForItemsEstimateForSubscriptionParams;

import com.chargebee.v4.models.estimate.params.ResumeSubscriptionEstimateForSubscriptionParams;

import com.chargebee.v4.models.estimate.params.EstimateCreateInvoiceForItemsParams;

import com.chargebee.v4.models.estimate.params.EstimateGiftSubscriptionForItemsParams;

import com.chargebee.v4.models.estimate.params.EstimateUpdateSubscriptionForItemsParams;

import com.chargebee.v4.models.estimate.params.RegenerateInvoiceEstimateForSubscriptionParams;

import com.chargebee.v4.models.estimate.params.CreateSubscriptionForItemsEstimateForCustomerParams;

import com.chargebee.v4.models.estimate.params.ChangeTermEndEstimateForSubscriptionParams;

import com.chargebee.v4.models.estimate.params.PauseSubscriptionEstimateForSubscriptionParams;

import com.chargebee.v4.models.estimate.params.AdvanceInvoiceEstimateForSubscriptionParams;

import com.chargebee.v4.models.estimate.params.EstimateUpdateSubscriptionParams;

import com.chargebee.v4.models.estimate.params.EstimateGiftSubscriptionParams;

import com.chargebee.v4.models.estimate.params.EstimateCreateSubscriptionParams;

import com.chargebee.v4.models.estimate.params.EstimateCreateInvoiceParams;

import com.chargebee.v4.models.estimate.params.CancelSubscriptionEstimateForSubscriptionParams;

import com.chargebee.v4.models.estimate.responses.RenewalEstimateForSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.EstimateCreateSubscriptionForItemsResponse;

import com.chargebee.v4.models.estimate.responses.EstimatePaymentSchedulesResponse;

import com.chargebee.v4.models.estimate.responses.CancelSubscriptionForItemsEstimateForSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.ResumeSubscriptionEstimateForSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.EstimateCreateInvoiceForItemsResponse;

import com.chargebee.v4.models.estimate.responses.EstimateGiftSubscriptionForItemsResponse;

import com.chargebee.v4.models.estimate.responses.EstimateUpdateSubscriptionForItemsResponse;

import com.chargebee.v4.models.estimate.responses.UpcomingInvoicesEstimateForCustomerResponse;

import com.chargebee.v4.models.estimate.responses.RegenerateInvoiceEstimateForSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.CreateSubscriptionForItemsEstimateForCustomerResponse;

import com.chargebee.v4.models.estimate.responses.ChangeTermEndEstimateForSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.PauseSubscriptionEstimateForSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.AdvanceInvoiceEstimateForSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.EstimateUpdateSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.EstimateGiftSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.CreateSubscriptionEstimateForCustomerResponse;

import com.chargebee.v4.models.estimate.responses.EstimateCreateSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.EstimateCreateInvoiceResponse;

import com.chargebee.v4.models.estimate.responses.CancelSubscriptionEstimateForSubscriptionResponse;

public final class EstimateService extends BaseService<EstimateService> {

  private final ServiceConfig config;

  public EstimateService(ChargebeeClient client) {
    super(client);
    this.config = ServiceConfig.defaultConfig();
  }

  private EstimateService(ChargebeeClient client, RequestOptions options) {
    super(client, options);
    this.config = ServiceConfig.defaultConfig();
  }

  private EstimateService(ChargebeeClient client, RequestOptions options, ServiceConfig config) {
    super(client, options);
    this.config = config;
  }

  @Override
  EstimateService with(RequestOptions newOptions) {
    return new EstimateService(client, newOptions, config);
  }

  /**
   * Apply per-request options for this service instance. Users can chain .withOptions or .options
   * to set headers and other options.
   */
  public EstimateService withOptions(RequestOptions options) {
    return with(options);
  }

  // === Operations ===

  /** renewalEstimateForSubscription a estimate (executes immediately) - returns raw Response. */
  Response renewalEstimateForSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/renewal_estimate", "subscription-id", subscriptionId);

    return get(path, null);
  }

  public RenewalEstimateForSubscriptionResponse renewalEstimateForSubscription(
      String subscriptionId) throws Exception {
    Response response = renewalEstimateForSubscriptionRaw(subscriptionId);
    return RenewalEstimateForSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createSubscriptionForItems a estimate using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response createSubscriptionForItemsRaw(EstimateCreateSubscriptionForItemsParams params)
      throws Exception {

    return post(
        "/estimates/create_subscription_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * createSubscriptionForItems a estimate using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response createSubscriptionForItemsRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/create_subscription_for_items", jsonPayload);
  }

  public EstimateCreateSubscriptionForItemsResponse createSubscriptionForItems(
      EstimateCreateSubscriptionForItemsParams params) throws Exception {
    Response response = createSubscriptionForItemsRaw(params);

    return EstimateCreateSubscriptionForItemsResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * paymentSchedules a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response paymentSchedulesRaw(EstimatePaymentSchedulesParams params) throws Exception {

    return post("/estimates/payment_schedules", params != null ? params.toFormData() : null);
  }

  /**
   * paymentSchedules a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response paymentSchedulesRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/payment_schedules", jsonPayload);
  }

  public EstimatePaymentSchedulesResponse paymentSchedules(EstimatePaymentSchedulesParams params)
      throws Exception {
    Response response = paymentSchedulesRaw(params);

    return EstimatePaymentSchedulesResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * cancelSubscriptionForItemsEstimateForSubscription a estimate (executes immediately) - returns
   * raw Response.
   */
  Response cancelSubscriptionForItemsEstimateForSubscriptionRaw(String subscriptionId)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_for_items_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * cancelSubscriptionForItemsEstimateForSubscription a estimate using immutable params (executes
   * immediately) - returns raw Response.
   */
  Response cancelSubscriptionForItemsEstimateForSubscriptionRaw(
      String subscriptionId, CancelSubscriptionForItemsEstimateForSubscriptionParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_for_items_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * cancelSubscriptionForItemsEstimateForSubscription a estimate using raw JSON payload (executes
   * immediately) - returns raw Response.
   */
  Response cancelSubscriptionForItemsEstimateForSubscriptionRaw(
      String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_for_items_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public CancelSubscriptionForItemsEstimateForSubscriptionResponse
      cancelSubscriptionForItemsEstimateForSubscription(
          String subscriptionId, CancelSubscriptionForItemsEstimateForSubscriptionParams params)
          throws Exception {
    Response response =
        cancelSubscriptionForItemsEstimateForSubscriptionRaw(subscriptionId, params);
    return CancelSubscriptionForItemsEstimateForSubscriptionResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * resumeSubscriptionEstimateForSubscription a estimate (executes immediately) - returns raw
   * Response.
   */
  Response resumeSubscriptionEstimateForSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume_subscription_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * resumeSubscriptionEstimateForSubscription a estimate using immutable params (executes
   * immediately) - returns raw Response.
   */
  Response resumeSubscriptionEstimateForSubscriptionRaw(
      String subscriptionId, ResumeSubscriptionEstimateForSubscriptionParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * resumeSubscriptionEstimateForSubscription a estimate using raw JSON payload (executes
   * immediately) - returns raw Response.
   */
  Response resumeSubscriptionEstimateForSubscriptionRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public ResumeSubscriptionEstimateForSubscriptionResponse
      resumeSubscriptionEstimateForSubscription(
          String subscriptionId, ResumeSubscriptionEstimateForSubscriptionParams params)
          throws Exception {
    Response response = resumeSubscriptionEstimateForSubscriptionRaw(subscriptionId, params);
    return ResumeSubscriptionEstimateForSubscriptionResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * createInvoiceForItems a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response createInvoiceForItemsRaw(EstimateCreateInvoiceForItemsParams params) throws Exception {

    return post("/estimates/create_invoice_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * createInvoiceForItems a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response createInvoiceForItemsRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/create_invoice_for_items", jsonPayload);
  }

  public EstimateCreateInvoiceForItemsResponse createInvoiceForItems(
      EstimateCreateInvoiceForItemsParams params) throws Exception {
    Response response = createInvoiceForItemsRaw(params);

    return EstimateCreateInvoiceForItemsResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * giftSubscriptionForItems a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionForItemsRaw(EstimateGiftSubscriptionForItemsParams params)
      throws Exception {

    return post(
        "/estimates/gift_subscription_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * giftSubscriptionForItems a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionForItemsRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/gift_subscription_for_items", jsonPayload);
  }

  public EstimateGiftSubscriptionForItemsResponse giftSubscriptionForItems(
      EstimateGiftSubscriptionForItemsParams params) throws Exception {
    Response response = giftSubscriptionForItemsRaw(params);

    return EstimateGiftSubscriptionForItemsResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * updateSubscriptionForItems a estimate using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response updateSubscriptionForItemsRaw(EstimateUpdateSubscriptionForItemsParams params)
      throws Exception {

    return post(
        "/estimates/update_subscription_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * updateSubscriptionForItems a estimate using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response updateSubscriptionForItemsRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/update_subscription_for_items", jsonPayload);
  }

  public EstimateUpdateSubscriptionForItemsResponse updateSubscriptionForItems(
      EstimateUpdateSubscriptionForItemsParams params) throws Exception {
    Response response = updateSubscriptionForItemsRaw(params);

    return EstimateUpdateSubscriptionForItemsResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * upcomingInvoicesEstimateForCustomer a estimate (executes immediately) - returns raw Response.
   */
  Response upcomingInvoicesEstimateForCustomerRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/upcoming_invoices_estimate", "customer-id", customerId);

    return get(path, null);
  }

  public UpcomingInvoicesEstimateForCustomerResponse upcomingInvoicesEstimateForCustomer(
      String customerId) throws Exception {
    Response response = upcomingInvoicesEstimateForCustomerRaw(customerId);
    return UpcomingInvoicesEstimateForCustomerResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * regenerateInvoiceEstimateForSubscription a estimate (executes immediately) - returns raw
   * Response.
   */
  Response regenerateInvoiceEstimateForSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * regenerateInvoiceEstimateForSubscription a estimate using immutable params (executes
   * immediately) - returns raw Response.
   */
  Response regenerateInvoiceEstimateForSubscriptionRaw(
      String subscriptionId, RegenerateInvoiceEstimateForSubscriptionParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * regenerateInvoiceEstimateForSubscription a estimate using raw JSON payload (executes
   * immediately) - returns raw Response.
   */
  Response regenerateInvoiceEstimateForSubscriptionRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public RegenerateInvoiceEstimateForSubscriptionResponse regenerateInvoiceEstimateForSubscription(
      String subscriptionId, RegenerateInvoiceEstimateForSubscriptionParams params)
      throws Exception {
    Response response = regenerateInvoiceEstimateForSubscriptionRaw(subscriptionId, params);
    return RegenerateInvoiceEstimateForSubscriptionResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * createSubscriptionForItemsEstimateForCustomer a estimate (executes immediately) - returns raw
   * Response.
   */
  Response createSubscriptionForItemsEstimateForCustomerRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_for_items_estimate",
            "customer-id",
            customerId);

    return post(path, null);
  }

  /**
   * createSubscriptionForItemsEstimateForCustomer a estimate using immutable params (executes
   * immediately) - returns raw Response.
   */
  Response createSubscriptionForItemsEstimateForCustomerRaw(
      String customerId, CreateSubscriptionForItemsEstimateForCustomerParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_for_items_estimate",
            "customer-id",
            customerId);
    return post(path, params.toFormData());
  }

  /**
   * createSubscriptionForItemsEstimateForCustomer a estimate using raw JSON payload (executes
   * immediately) - returns raw Response.
   */
  Response createSubscriptionForItemsEstimateForCustomerRaw(String customerId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_for_items_estimate",
            "customer-id",
            customerId);
    return postJson(path, jsonPayload);
  }

  public CreateSubscriptionForItemsEstimateForCustomerResponse
      createSubscriptionForItemsEstimateForCustomer(
          String customerId, CreateSubscriptionForItemsEstimateForCustomerParams params)
          throws Exception {
    Response response = createSubscriptionForItemsEstimateForCustomerRaw(customerId, params);
    return CreateSubscriptionForItemsEstimateForCustomerResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * changeTermEndEstimateForSubscription a estimate (executes immediately) - returns raw Response.
   */
  Response changeTermEndEstimateForSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * changeTermEndEstimateForSubscription a estimate using immutable params (executes immediately) -
   * returns raw Response.
   */
  Response changeTermEndEstimateForSubscriptionRaw(
      String subscriptionId, ChangeTermEndEstimateForSubscriptionParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * changeTermEndEstimateForSubscription a estimate using raw JSON payload (executes immediately) -
   * returns raw Response.
   */
  Response changeTermEndEstimateForSubscriptionRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public ChangeTermEndEstimateForSubscriptionResponse changeTermEndEstimateForSubscription(
      String subscriptionId, ChangeTermEndEstimateForSubscriptionParams params) throws Exception {
    Response response = changeTermEndEstimateForSubscriptionRaw(subscriptionId, params);
    return ChangeTermEndEstimateForSubscriptionResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * pauseSubscriptionEstimateForSubscription a estimate (executes immediately) - returns raw
   * Response.
   */
  Response pauseSubscriptionEstimateForSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause_subscription_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * pauseSubscriptionEstimateForSubscription a estimate using immutable params (executes
   * immediately) - returns raw Response.
   */
  Response pauseSubscriptionEstimateForSubscriptionRaw(
      String subscriptionId, PauseSubscriptionEstimateForSubscriptionParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * pauseSubscriptionEstimateForSubscription a estimate using raw JSON payload (executes
   * immediately) - returns raw Response.
   */
  Response pauseSubscriptionEstimateForSubscriptionRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public PauseSubscriptionEstimateForSubscriptionResponse pauseSubscriptionEstimateForSubscription(
      String subscriptionId, PauseSubscriptionEstimateForSubscriptionParams params)
      throws Exception {
    Response response = pauseSubscriptionEstimateForSubscriptionRaw(subscriptionId, params);
    return PauseSubscriptionEstimateForSubscriptionResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * advanceInvoiceEstimateForSubscription a estimate (executes immediately) - returns raw Response.
   */
  Response advanceInvoiceEstimateForSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/advance_invoice_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * advanceInvoiceEstimateForSubscription a estimate using immutable params (executes immediately)
   * - returns raw Response.
   */
  Response advanceInvoiceEstimateForSubscriptionRaw(
      String subscriptionId, AdvanceInvoiceEstimateForSubscriptionParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/advance_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * advanceInvoiceEstimateForSubscription a estimate using raw JSON payload (executes immediately)
   * - returns raw Response.
   */
  Response advanceInvoiceEstimateForSubscriptionRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/advance_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public AdvanceInvoiceEstimateForSubscriptionResponse advanceInvoiceEstimateForSubscription(
      String subscriptionId, AdvanceInvoiceEstimateForSubscriptionParams params) throws Exception {
    Response response = advanceInvoiceEstimateForSubscriptionRaw(subscriptionId, params);
    return AdvanceInvoiceEstimateForSubscriptionResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * updateSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response updateSubscriptionRaw(EstimateUpdateSubscriptionParams params) throws Exception {

    return post("/estimates/update_subscription", params != null ? params.toFormData() : null);
  }

  /**
   * updateSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response updateSubscriptionRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/update_subscription", jsonPayload);
  }

  public EstimateUpdateSubscriptionResponse updateSubscription(
      EstimateUpdateSubscriptionParams params) throws Exception {
    Response response = updateSubscriptionRaw(params);

    return EstimateUpdateSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * giftSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionRaw(EstimateGiftSubscriptionParams params) throws Exception {

    return post("/estimates/gift_subscription", params != null ? params.toFormData() : null);
  }

  /**
   * giftSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/gift_subscription", jsonPayload);
  }

  public EstimateGiftSubscriptionResponse giftSubscription(EstimateGiftSubscriptionParams params)
      throws Exception {
    Response response = giftSubscriptionRaw(params);

    return EstimateGiftSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createSubscriptionEstimateForCustomer a estimate (executes immediately) - returns raw Response.
   */
  Response createSubscriptionEstimateForCustomerRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_estimate", "customer-id", customerId);

    return get(path, null);
  }

  public CreateSubscriptionEstimateForCustomerResponse createSubscriptionEstimateForCustomer(
      String customerId) throws Exception {
    Response response = createSubscriptionEstimateForCustomerRaw(customerId);
    return CreateSubscriptionEstimateForCustomerResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * createSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response createSubscriptionRaw(EstimateCreateSubscriptionParams params) throws Exception {

    return post("/estimates/create_subscription", params != null ? params.toFormData() : null);
  }

  /**
   * createSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response createSubscriptionRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/create_subscription", jsonPayload);
  }

  public EstimateCreateSubscriptionResponse createSubscription(
      EstimateCreateSubscriptionParams params) throws Exception {
    Response response = createSubscriptionRaw(params);

    return EstimateCreateSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createInvoice a estimate using immutable params (executes immediately) - returns raw Response.
   */
  Response createInvoiceRaw(EstimateCreateInvoiceParams params) throws Exception {

    return post("/estimates/create_invoice", params != null ? params.toFormData() : null);
  }

  /**
   * createInvoice a estimate using raw JSON payload (executes immediately) - returns raw Response.
   */
  Response createInvoiceRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/create_invoice", jsonPayload);
  }

  public EstimateCreateInvoiceResponse createInvoice(EstimateCreateInvoiceParams params)
      throws Exception {
    Response response = createInvoiceRaw(params);

    return EstimateCreateInvoiceResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * cancelSubscriptionEstimateForSubscription a estimate (executes immediately) - returns raw
   * Response.
   */
  Response cancelSubscriptionEstimateForSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * cancelSubscriptionEstimateForSubscription a estimate using immutable params (executes
   * immediately) - returns raw Response.
   */
  Response cancelSubscriptionEstimateForSubscriptionRaw(
      String subscriptionId, CancelSubscriptionEstimateForSubscriptionParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * cancelSubscriptionEstimateForSubscription a estimate using raw JSON payload (executes
   * immediately) - returns raw Response.
   */
  Response cancelSubscriptionEstimateForSubscriptionRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public CancelSubscriptionEstimateForSubscriptionResponse
      cancelSubscriptionEstimateForSubscription(
          String subscriptionId, CancelSubscriptionEstimateForSubscriptionParams params)
          throws Exception {
    Response response = cancelSubscriptionEstimateForSubscriptionRaw(subscriptionId, params);
    return CancelSubscriptionEstimateForSubscriptionResponse.fromJson(
        response.getBodyAsString(), response);
  }
}
