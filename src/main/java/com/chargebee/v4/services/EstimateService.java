/*
 * This file is auto-generated by Chargebee.
 * For more information on how to make changes to this file, please see the README.
 * Reach out to dx@chargebee.com for any questions.
 * Copyright 2025 Chargebee Inc.
 */

package com.chargebee.v4.services;

import com.chargebee.v4.client.ChargebeeClient;
import com.chargebee.v4.client.request.RequestOptions;
import com.chargebee.v4.exceptions.ChargebeeException;
import com.chargebee.v4.transport.Response;

import com.chargebee.v4.models.estimate.params.RenewalEstimateParams;

import com.chargebee.v4.models.estimate.params.CreateSubscriptionItemEstimateParams;

import com.chargebee.v4.models.estimate.params.EstimatePaymentSchedulesParams;

import com.chargebee.v4.models.estimate.params.EstimateCancelSubscriptionForItemsParams;

import com.chargebee.v4.models.estimate.params.EstimateResumeSubscriptionParams;

import com.chargebee.v4.models.estimate.params.EstimateCreateInvoiceForItemsParams;

import com.chargebee.v4.models.estimate.params.EstimateGiftSubscriptionForItemsParams;

import com.chargebee.v4.models.estimate.params.EstimateUpdateSubscriptionForItemsParams;

import com.chargebee.v4.models.estimate.params.RegenerateInvoiceEstimateParams;

import com.chargebee.v4.models.estimate.params.CreateSubscriptionItemForCustomerEstimateParams;

import com.chargebee.v4.models.estimate.params.EstimateChangeTermEndParams;

import com.chargebee.v4.models.estimate.params.EstimatePauseSubscriptionParams;

import com.chargebee.v4.models.estimate.params.AdvanceInvoiceEstimateParams;

import com.chargebee.v4.models.estimate.params.EstimateUpdateSubscriptionParams;

import com.chargebee.v4.models.estimate.params.EstimateGiftSubscriptionParams;

import com.chargebee.v4.models.estimate.params.CreateSubscriptionForCustomerEstimateParams;

import com.chargebee.v4.models.estimate.params.EstimateCreateSubscriptionParams;

import com.chargebee.v4.models.estimate.params.EstimateCreateInvoiceParams;

import com.chargebee.v4.models.estimate.params.EstimateCancelSubscriptionParams;

import com.chargebee.v4.models.estimate.responses.RenewalEstimateResponse;

import com.chargebee.v4.models.estimate.responses.CreateSubscriptionItemEstimateResponse;

import com.chargebee.v4.models.estimate.responses.EstimatePaymentSchedulesResponse;

import com.chargebee.v4.models.estimate.responses.EstimateCancelSubscriptionForItemsResponse;

import com.chargebee.v4.models.estimate.responses.EstimateResumeSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.EstimateCreateInvoiceForItemsResponse;

import com.chargebee.v4.models.estimate.responses.EstimateGiftSubscriptionForItemsResponse;

import com.chargebee.v4.models.estimate.responses.EstimateUpdateSubscriptionForItemsResponse;

import com.chargebee.v4.models.estimate.responses.UpcomingInvoicesEstimateResponse;

import com.chargebee.v4.models.estimate.responses.RegenerateInvoiceEstimateResponse;

import com.chargebee.v4.models.estimate.responses.CreateSubscriptionItemForCustomerEstimateResponse;

import com.chargebee.v4.models.estimate.responses.EstimateChangeTermEndResponse;

import com.chargebee.v4.models.estimate.responses.EstimatePauseSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.AdvanceInvoiceEstimateResponse;

import com.chargebee.v4.models.estimate.responses.EstimateUpdateSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.EstimateGiftSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.CreateSubscriptionForCustomerEstimateResponse;

import com.chargebee.v4.models.estimate.responses.EstimateCreateSubscriptionResponse;

import com.chargebee.v4.models.estimate.responses.EstimateCreateInvoiceResponse;

import com.chargebee.v4.models.estimate.responses.EstimateCancelSubscriptionResponse;

public final class EstimateService extends BaseService<EstimateService> {

  private final ServiceConfig config;

  public EstimateService(ChargebeeClient client) {
    super(client);
    this.config = ServiceConfig.defaultConfig();
  }

  private EstimateService(ChargebeeClient client, RequestOptions options) {
    super(client, options);
    this.config = ServiceConfig.defaultConfig();
  }

  private EstimateService(ChargebeeClient client, RequestOptions options, ServiceConfig config) {
    super(client, options);
    this.config = config;
  }

  @Override
  EstimateService with(RequestOptions newOptions) {
    return new EstimateService(client, newOptions, config);
  }

  /**
   * Apply per-request options for this service instance. Users can chain .withOptions or .options
   * to set headers and other options.
   */
  public EstimateService withOptions(RequestOptions options) {
    return with(options);
  }

  // === Operations ===

  /** renewalEstimate a estimate (executes immediately) - returns raw Response. */
  Response renewalEstimateRaw(String subscriptionId) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/renewal_estimate", "subscription-id", subscriptionId);

    return get(path, null);
  }

  /**
   * renewalEstimate a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response renewalEstimateRaw(String subscriptionId, RenewalEstimateParams params)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/renewal_estimate", "subscription-id", subscriptionId);
    return get(path, params != null ? params.toQueryParams() : null);
  }

  public RenewalEstimateResponse renewalEstimate(
      String subscriptionId, RenewalEstimateParams params) throws ChargebeeException {
    Response response = renewalEstimateRaw(subscriptionId, params);
    return RenewalEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  public RenewalEstimateResponse renewalEstimate(String subscriptionId) throws ChargebeeException {
    Response response = renewalEstimateRaw(subscriptionId);
    return RenewalEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createSubscriptionItemEstimate a estimate using immutable params (executes immediately) -
   * returns raw Response.
   */
  Response createSubscriptionItemEstimateRaw(CreateSubscriptionItemEstimateParams params)
      throws ChargebeeException {

    return post(
        "/estimates/create_subscription_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * createSubscriptionItemEstimate a estimate using raw JSON payload (executes immediately) -
   * returns raw Response.
   */
  Response createSubscriptionItemEstimateRaw(String jsonPayload) throws ChargebeeException {

    return postJson("/estimates/create_subscription_for_items", jsonPayload);
  }

  public CreateSubscriptionItemEstimateResponse createSubscriptionItemEstimate(
      CreateSubscriptionItemEstimateParams params) throws ChargebeeException {
    Response response = createSubscriptionItemEstimateRaw(params);

    return CreateSubscriptionItemEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * paymentSchedules a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response paymentSchedulesRaw(EstimatePaymentSchedulesParams params) throws ChargebeeException {

    return post("/estimates/payment_schedules", params != null ? params.toFormData() : null);
  }

  /**
   * paymentSchedules a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response paymentSchedulesRaw(String jsonPayload) throws ChargebeeException {

    return postJson("/estimates/payment_schedules", jsonPayload);
  }

  public EstimatePaymentSchedulesResponse paymentSchedules(EstimatePaymentSchedulesParams params)
      throws ChargebeeException {
    Response response = paymentSchedulesRaw(params);

    return EstimatePaymentSchedulesResponse.fromJson(response.getBodyAsString(), response);
  }

  /** cancelSubscriptionForItems a estimate (executes immediately) - returns raw Response. */
  Response cancelSubscriptionForItemsRaw(String subscriptionId) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_for_items_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * cancelSubscriptionForItems a estimate using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response cancelSubscriptionForItemsRaw(
      String subscriptionId, EstimateCancelSubscriptionForItemsParams params)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_for_items_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * cancelSubscriptionForItems a estimate using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response cancelSubscriptionForItemsRaw(String subscriptionId, String jsonPayload)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_for_items_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimateCancelSubscriptionForItemsResponse cancelSubscriptionForItems(
      String subscriptionId, EstimateCancelSubscriptionForItemsParams params)
      throws ChargebeeException {
    Response response = cancelSubscriptionForItemsRaw(subscriptionId, params);
    return EstimateCancelSubscriptionForItemsResponse.fromJson(
        response.getBodyAsString(), response);
  }

  public EstimateCancelSubscriptionForItemsResponse cancelSubscriptionForItems(
      String subscriptionId) throws ChargebeeException {
    Response response = cancelSubscriptionForItemsRaw(subscriptionId);
    return EstimateCancelSubscriptionForItemsResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /** resumeSubscription a estimate (executes immediately) - returns raw Response. */
  Response resumeSubscriptionRaw(String subscriptionId) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume_subscription_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * resumeSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response resumeSubscriptionRaw(String subscriptionId, EstimateResumeSubscriptionParams params)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * resumeSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response resumeSubscriptionRaw(String subscriptionId, String jsonPayload)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimateResumeSubscriptionResponse resumeSubscription(
      String subscriptionId, EstimateResumeSubscriptionParams params) throws ChargebeeException {
    Response response = resumeSubscriptionRaw(subscriptionId, params);
    return EstimateResumeSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  public EstimateResumeSubscriptionResponse resumeSubscription(String subscriptionId)
      throws ChargebeeException {
    Response response = resumeSubscriptionRaw(subscriptionId);
    return EstimateResumeSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createInvoiceForItems a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response createInvoiceForItemsRaw(EstimateCreateInvoiceForItemsParams params)
      throws ChargebeeException {

    return post("/estimates/create_invoice_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * createInvoiceForItems a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response createInvoiceForItemsRaw(String jsonPayload) throws ChargebeeException {

    return postJson("/estimates/create_invoice_for_items", jsonPayload);
  }

  public EstimateCreateInvoiceForItemsResponse createInvoiceForItems(
      EstimateCreateInvoiceForItemsParams params) throws ChargebeeException {
    Response response = createInvoiceForItemsRaw(params);

    return EstimateCreateInvoiceForItemsResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * giftSubscriptionForItems a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionForItemsRaw(EstimateGiftSubscriptionForItemsParams params)
      throws ChargebeeException {

    return post(
        "/estimates/gift_subscription_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * giftSubscriptionForItems a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionForItemsRaw(String jsonPayload) throws ChargebeeException {

    return postJson("/estimates/gift_subscription_for_items", jsonPayload);
  }

  public EstimateGiftSubscriptionForItemsResponse giftSubscriptionForItems(
      EstimateGiftSubscriptionForItemsParams params) throws ChargebeeException {
    Response response = giftSubscriptionForItemsRaw(params);

    return EstimateGiftSubscriptionForItemsResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * updateSubscriptionForItems a estimate using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response updateSubscriptionForItemsRaw(EstimateUpdateSubscriptionForItemsParams params)
      throws ChargebeeException {

    return post(
        "/estimates/update_subscription_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * updateSubscriptionForItems a estimate using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response updateSubscriptionForItemsRaw(String jsonPayload) throws ChargebeeException {

    return postJson("/estimates/update_subscription_for_items", jsonPayload);
  }

  public EstimateUpdateSubscriptionForItemsResponse updateSubscriptionForItems(
      EstimateUpdateSubscriptionForItemsParams params) throws ChargebeeException {
    Response response = updateSubscriptionForItemsRaw(params);

    return EstimateUpdateSubscriptionForItemsResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /** upcomingInvoicesEstimate a estimate (executes immediately) - returns raw Response. */
  Response upcomingInvoicesEstimateRaw(String customerId) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/upcoming_invoices_estimate", "customer-id", customerId);

    return get(path, null);
  }

  public UpcomingInvoicesEstimateResponse upcomingInvoicesEstimate(String customerId)
      throws ChargebeeException {
    Response response = upcomingInvoicesEstimateRaw(customerId);
    return UpcomingInvoicesEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  /** regenerateInvoiceEstimate a estimate (executes immediately) - returns raw Response. */
  Response regenerateInvoiceEstimateRaw(String subscriptionId) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * regenerateInvoiceEstimate a estimate using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response regenerateInvoiceEstimateRaw(
      String subscriptionId, RegenerateInvoiceEstimateParams params) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * regenerateInvoiceEstimate a estimate using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response regenerateInvoiceEstimateRaw(String subscriptionId, String jsonPayload)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public RegenerateInvoiceEstimateResponse regenerateInvoiceEstimate(
      String subscriptionId, RegenerateInvoiceEstimateParams params) throws ChargebeeException {
    Response response = regenerateInvoiceEstimateRaw(subscriptionId, params);
    return RegenerateInvoiceEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  public RegenerateInvoiceEstimateResponse regenerateInvoiceEstimate(String subscriptionId)
      throws ChargebeeException {
    Response response = regenerateInvoiceEstimateRaw(subscriptionId);
    return RegenerateInvoiceEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createSubscriptionItemForCustomerEstimate a estimate (executes immediately) - returns raw
   * Response.
   */
  Response createSubscriptionItemForCustomerEstimateRaw(String customerId)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_for_items_estimate",
            "customer-id",
            customerId);

    return post(path, null);
  }

  /**
   * createSubscriptionItemForCustomerEstimate a estimate using immutable params (executes
   * immediately) - returns raw Response.
   */
  Response createSubscriptionItemForCustomerEstimateRaw(
      String customerId, CreateSubscriptionItemForCustomerEstimateParams params)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_for_items_estimate",
            "customer-id",
            customerId);
    return post(path, params.toFormData());
  }

  /**
   * createSubscriptionItemForCustomerEstimate a estimate using raw JSON payload (executes
   * immediately) - returns raw Response.
   */
  Response createSubscriptionItemForCustomerEstimateRaw(String customerId, String jsonPayload)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_for_items_estimate",
            "customer-id",
            customerId);
    return postJson(path, jsonPayload);
  }

  public CreateSubscriptionItemForCustomerEstimateResponse
      createSubscriptionItemForCustomerEstimate(
          String customerId, CreateSubscriptionItemForCustomerEstimateParams params)
          throws ChargebeeException {
    Response response = createSubscriptionItemForCustomerEstimateRaw(customerId, params);
    return CreateSubscriptionItemForCustomerEstimateResponse.fromJson(
        response.getBodyAsString(), response);
  }

  public CreateSubscriptionItemForCustomerEstimateResponse
      createSubscriptionItemForCustomerEstimate(String customerId) throws ChargebeeException {
    Response response = createSubscriptionItemForCustomerEstimateRaw(customerId);
    return CreateSubscriptionItemForCustomerEstimateResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /** changeTermEnd a estimate (executes immediately) - returns raw Response. */
  Response changeTermEndRaw(String subscriptionId) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * changeTermEnd a estimate using immutable params (executes immediately) - returns raw Response.
   */
  Response changeTermEndRaw(String subscriptionId, EstimateChangeTermEndParams params)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * changeTermEnd a estimate using raw JSON payload (executes immediately) - returns raw Response.
   */
  Response changeTermEndRaw(String subscriptionId, String jsonPayload) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimateChangeTermEndResponse changeTermEnd(
      String subscriptionId, EstimateChangeTermEndParams params) throws ChargebeeException {
    Response response = changeTermEndRaw(subscriptionId, params);
    return EstimateChangeTermEndResponse.fromJson(response.getBodyAsString(), response);
  }

  /** pauseSubscription a estimate (executes immediately) - returns raw Response. */
  Response pauseSubscriptionRaw(String subscriptionId) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause_subscription_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * pauseSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response pauseSubscriptionRaw(String subscriptionId, EstimatePauseSubscriptionParams params)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * pauseSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response pauseSubscriptionRaw(String subscriptionId, String jsonPayload)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimatePauseSubscriptionResponse pauseSubscription(
      String subscriptionId, EstimatePauseSubscriptionParams params) throws ChargebeeException {
    Response response = pauseSubscriptionRaw(subscriptionId, params);
    return EstimatePauseSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  public EstimatePauseSubscriptionResponse pauseSubscription(String subscriptionId)
      throws ChargebeeException {
    Response response = pauseSubscriptionRaw(subscriptionId);
    return EstimatePauseSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /** advanceInvoiceEstimate a estimate (executes immediately) - returns raw Response. */
  Response advanceInvoiceEstimateRaw(String subscriptionId) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/advance_invoice_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * advanceInvoiceEstimate a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response advanceInvoiceEstimateRaw(String subscriptionId, AdvanceInvoiceEstimateParams params)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/advance_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * advanceInvoiceEstimate a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response advanceInvoiceEstimateRaw(String subscriptionId, String jsonPayload)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/advance_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public AdvanceInvoiceEstimateResponse advanceInvoiceEstimate(
      String subscriptionId, AdvanceInvoiceEstimateParams params) throws ChargebeeException {
    Response response = advanceInvoiceEstimateRaw(subscriptionId, params);
    return AdvanceInvoiceEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  public AdvanceInvoiceEstimateResponse advanceInvoiceEstimate(String subscriptionId)
      throws ChargebeeException {
    Response response = advanceInvoiceEstimateRaw(subscriptionId);
    return AdvanceInvoiceEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * updateSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response updateSubscriptionRaw(EstimateUpdateSubscriptionParams params)
      throws ChargebeeException {

    return post("/estimates/update_subscription", params != null ? params.toFormData() : null);
  }

  /**
   * updateSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response updateSubscriptionRaw(String jsonPayload) throws ChargebeeException {

    return postJson("/estimates/update_subscription", jsonPayload);
  }

  public EstimateUpdateSubscriptionResponse updateSubscription(
      EstimateUpdateSubscriptionParams params) throws ChargebeeException {
    Response response = updateSubscriptionRaw(params);

    return EstimateUpdateSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * giftSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionRaw(EstimateGiftSubscriptionParams params) throws ChargebeeException {

    return post("/estimates/gift_subscription", params != null ? params.toFormData() : null);
  }

  /**
   * giftSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionRaw(String jsonPayload) throws ChargebeeException {

    return postJson("/estimates/gift_subscription", jsonPayload);
  }

  public EstimateGiftSubscriptionResponse giftSubscription(EstimateGiftSubscriptionParams params)
      throws ChargebeeException {
    Response response = giftSubscriptionRaw(params);

    return EstimateGiftSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createSubscriptionForCustomerEstimate a estimate (executes immediately) - returns raw Response.
   */
  Response createSubscriptionForCustomerEstimateRaw(String customerId) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_estimate", "customer-id", customerId);

    return get(path, null);
  }

  /**
   * createSubscriptionForCustomerEstimate a estimate using immutable params (executes immediately)
   * - returns raw Response.
   */
  Response createSubscriptionForCustomerEstimateRaw(
      String customerId, CreateSubscriptionForCustomerEstimateParams params)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_estimate", "customer-id", customerId);
    return get(path, params != null ? params.toQueryParams() : null);
  }

  public CreateSubscriptionForCustomerEstimateResponse createSubscriptionForCustomerEstimate(
      String customerId, CreateSubscriptionForCustomerEstimateParams params)
      throws ChargebeeException {
    Response response = createSubscriptionForCustomerEstimateRaw(customerId, params);
    return CreateSubscriptionForCustomerEstimateResponse.fromJson(
        response.getBodyAsString(), response);
  }

  public CreateSubscriptionForCustomerEstimateResponse createSubscriptionForCustomerEstimate(
      String customerId) throws ChargebeeException {
    Response response = createSubscriptionForCustomerEstimateRaw(customerId);
    return CreateSubscriptionForCustomerEstimateResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * createSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response createSubscriptionRaw(EstimateCreateSubscriptionParams params)
      throws ChargebeeException {

    return post("/estimates/create_subscription", params != null ? params.toFormData() : null);
  }

  /**
   * createSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response createSubscriptionRaw(String jsonPayload) throws ChargebeeException {

    return postJson("/estimates/create_subscription", jsonPayload);
  }

  public EstimateCreateSubscriptionResponse createSubscription(
      EstimateCreateSubscriptionParams params) throws ChargebeeException {
    Response response = createSubscriptionRaw(params);

    return EstimateCreateSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createInvoice a estimate using immutable params (executes immediately) - returns raw Response.
   */
  Response createInvoiceRaw(EstimateCreateInvoiceParams params) throws ChargebeeException {

    return post("/estimates/create_invoice", params != null ? params.toFormData() : null);
  }

  /**
   * createInvoice a estimate using raw JSON payload (executes immediately) - returns raw Response.
   */
  Response createInvoiceRaw(String jsonPayload) throws ChargebeeException {

    return postJson("/estimates/create_invoice", jsonPayload);
  }

  public EstimateCreateInvoiceResponse createInvoice(EstimateCreateInvoiceParams params)
      throws ChargebeeException {
    Response response = createInvoiceRaw(params);

    return EstimateCreateInvoiceResponse.fromJson(response.getBodyAsString(), response);
  }

  /** cancelSubscription a estimate (executes immediately) - returns raw Response. */
  Response cancelSubscriptionRaw(String subscriptionId) throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * cancelSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response cancelSubscriptionRaw(String subscriptionId, EstimateCancelSubscriptionParams params)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * cancelSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response cancelSubscriptionRaw(String subscriptionId, String jsonPayload)
      throws ChargebeeException {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimateCancelSubscriptionResponse cancelSubscription(
      String subscriptionId, EstimateCancelSubscriptionParams params) throws ChargebeeException {
    Response response = cancelSubscriptionRaw(subscriptionId, params);
    return EstimateCancelSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  public EstimateCancelSubscriptionResponse cancelSubscription(String subscriptionId)
      throws ChargebeeException {
    Response response = cancelSubscriptionRaw(subscriptionId);
    return EstimateCancelSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }
}
