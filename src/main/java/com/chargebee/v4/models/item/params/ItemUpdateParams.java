/*
 * This file is auto-generated by Chargebee.
 * For more information on how to make changes to this file, please see the README.
 * Reach out to dx@chargebee.com for any questions.
 * Copyright 2025 Chargebee Inc.
 */
package com.chargebee.v4.models.item.params;

import com.chargebee.v4.internal.Recommended;
import com.chargebee.v4.internal.JsonUtil;

import java.math.BigDecimal;
import java.util.Collections;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.List;

public final class ItemUpdateParams {

  private final String name;

  private final String description;

  private final Boolean isShippable;

  private final String externalName;

  private final String itemFamilyId;

  private final Boolean enabledInPortal;

  private final String redirectUrl;

  private final Boolean enabledForCheckout;

  private final ItemApplicability itemApplicability;

  private final Boolean clearApplicableItems;

  private final List<String> applicableItems;

  private final String unit;

  private final String giftClaimRedirectUrl;

  private final java.util.Map<String, Object> metadata;

  private final Boolean includedInMrr;

  private final Status status;

  private final Boolean isPercentagePricing;

  private final BundleConfigurationParams bundleConfiguration;

  private final List<BundleItemsToAddParams> bundleItemsToAdd;

  private final List<BundleItemsToUpdateParams> bundleItemsToUpdate;

  private final List<BundleItemsToRemoveParams> bundleItemsToRemove;

  private final Map<String, String> customFields;

  private ItemUpdateParams(ItemUpdateBuilder builder) {

    this.name = builder.name;

    this.description = builder.description;

    this.isShippable = builder.isShippable;

    this.externalName = builder.externalName;

    this.itemFamilyId = builder.itemFamilyId;

    this.enabledInPortal = builder.enabledInPortal;

    this.redirectUrl = builder.redirectUrl;

    this.enabledForCheckout = builder.enabledForCheckout;

    this.itemApplicability = builder.itemApplicability;

    this.clearApplicableItems = builder.clearApplicableItems;

    this.applicableItems = builder.applicableItems;

    this.unit = builder.unit;

    this.giftClaimRedirectUrl = builder.giftClaimRedirectUrl;

    this.metadata = builder.metadata;

    this.includedInMrr = builder.includedInMrr;

    this.status = builder.status;

    this.isPercentagePricing = builder.isPercentagePricing;

    this.bundleConfiguration = builder.bundleConfiguration;

    this.bundleItemsToAdd = builder.bundleItemsToAdd;

    this.bundleItemsToUpdate = builder.bundleItemsToUpdate;

    this.bundleItemsToRemove = builder.bundleItemsToRemove;

    this.customFields =
        builder.customFields.isEmpty()
            ? Collections.emptyMap()
            : Collections.unmodifiableMap(new LinkedHashMap<>(builder.customFields));
  }

  public String getName() {
    return name;
  }

  public String getDescription() {
    return description;
  }

  public Boolean getIsShippable() {
    return isShippable;
  }

  public String getExternalName() {
    return externalName;
  }

  public String getItemFamilyId() {
    return itemFamilyId;
  }

  public Boolean getEnabledInPortal() {
    return enabledInPortal;
  }

  public String getRedirectUrl() {
    return redirectUrl;
  }

  public Boolean getEnabledForCheckout() {
    return enabledForCheckout;
  }

  public ItemApplicability getItemApplicability() {
    return itemApplicability;
  }

  public Boolean getClearApplicableItems() {
    return clearApplicableItems;
  }

  public List<String> getApplicableItems() {
    return applicableItems;
  }

  public String getUnit() {
    return unit;
  }

  public String getGiftClaimRedirectUrl() {
    return giftClaimRedirectUrl;
  }

  public java.util.Map<String, Object> getMetadata() {
    return metadata;
  }

  public Boolean getIncludedInMrr() {
    return includedInMrr;
  }

  public Status getStatus() {
    return status;
  }

  public Boolean getIsPercentagePricing() {
    return isPercentagePricing;
  }

  public BundleConfigurationParams getBundleConfiguration() {
    return bundleConfiguration;
  }

  public List<BundleItemsToAddParams> getBundleItemsToAdd() {
    return bundleItemsToAdd;
  }

  public List<BundleItemsToUpdateParams> getBundleItemsToUpdate() {
    return bundleItemsToUpdate;
  }

  public List<BundleItemsToRemoveParams> getBundleItemsToRemove() {
    return bundleItemsToRemove;
  }

  public Map<String, String> customFields() {
    return customFields;
  }

  /** Get the form data for this request. */
  public Map<String, Object> toFormData() {
    Map<String, Object> formData = new LinkedHashMap<>();

    if (this.name != null) {

      formData.put("name", this.name);
    }

    if (this.description != null) {

      formData.put("description", this.description);
    }

    if (this.isShippable != null) {

      formData.put("is_shippable", this.isShippable);
    }

    if (this.externalName != null) {

      formData.put("external_name", this.externalName);
    }

    if (this.itemFamilyId != null) {

      formData.put("item_family_id", this.itemFamilyId);
    }

    if (this.enabledInPortal != null) {

      formData.put("enabled_in_portal", this.enabledInPortal);
    }

    if (this.redirectUrl != null) {

      formData.put("redirect_url", this.redirectUrl);
    }

    if (this.enabledForCheckout != null) {

      formData.put("enabled_for_checkout", this.enabledForCheckout);
    }

    if (this.itemApplicability != null) {

      formData.put("item_applicability", this.itemApplicability);
    }

    if (this.clearApplicableItems != null) {

      formData.put("clear_applicable_items", this.clearApplicableItems);
    }

    if (this.applicableItems != null) {

      formData.put("applicable_items", this.applicableItems);
    }

    if (this.unit != null) {

      formData.put("unit", this.unit);
    }

    if (this.giftClaimRedirectUrl != null) {

      formData.put("gift_claim_redirect_url", this.giftClaimRedirectUrl);
    }

    if (this.metadata != null) {

      formData.put("metadata", JsonUtil.toJson(this.metadata));
    }

    if (this.includedInMrr != null) {

      formData.put("included_in_mrr", this.includedInMrr);
    }

    if (this.status != null) {

      formData.put("status", this.status);
    }

    if (this.isPercentagePricing != null) {

      formData.put("is_percentage_pricing", this.isPercentagePricing);
    }

    if (this.bundleConfiguration != null) {

      // Single object
      Map<String, Object> nestedData = this.bundleConfiguration.toFormData();
      for (Map.Entry<String, Object> entry : nestedData.entrySet()) {
        String nestedKey = "bundle_configuration[" + entry.getKey() + "]";
        formData.put(nestedKey, entry.getValue());
      }
    }

    if (this.bundleItemsToAdd != null) {

      // List of objects
      for (int i = 0; i < this.bundleItemsToAdd.size(); i++) {
        BundleItemsToAddParams item = this.bundleItemsToAdd.get(i);
        if (item != null) {
          Map<String, Object> itemData = item.toFormData();
          for (Map.Entry<String, Object> entry : itemData.entrySet()) {
            String indexedKey = "bundle_items_to_add[" + entry.getKey() + "][" + i + "]";
            formData.put(indexedKey, entry.getValue());
          }
        }
      }
    }

    if (this.bundleItemsToUpdate != null) {

      // List of objects
      for (int i = 0; i < this.bundleItemsToUpdate.size(); i++) {
        BundleItemsToUpdateParams item = this.bundleItemsToUpdate.get(i);
        if (item != null) {
          Map<String, Object> itemData = item.toFormData();
          for (Map.Entry<String, Object> entry : itemData.entrySet()) {
            String indexedKey = "bundle_items_to_update[" + entry.getKey() + "][" + i + "]";
            formData.put(indexedKey, entry.getValue());
          }
        }
      }
    }

    if (this.bundleItemsToRemove != null) {

      // List of objects
      for (int i = 0; i < this.bundleItemsToRemove.size(); i++) {
        BundleItemsToRemoveParams item = this.bundleItemsToRemove.get(i);
        if (item != null) {
          Map<String, Object> itemData = item.toFormData();
          for (Map.Entry<String, Object> entry : itemData.entrySet()) {
            String indexedKey = "bundle_items_to_remove[" + entry.getKey() + "][" + i + "]";
            formData.put(indexedKey, entry.getValue());
          }
        }
      }
    }

    formData.putAll(customFields);

    return formData;
  }

  /** Create a new builder for ItemUpdateParams. */
  @Recommended(reason = "Preferred for reusability, validation, and LLM-friendliness")
  public static ItemUpdateBuilder builder() {
    return new ItemUpdateBuilder();
  }

  public static final class ItemUpdateBuilder {

    private String name;

    private String description;

    private Boolean isShippable;

    private String externalName;

    private String itemFamilyId;

    private Boolean enabledInPortal;

    private String redirectUrl;

    private Boolean enabledForCheckout;

    private ItemApplicability itemApplicability;

    private Boolean clearApplicableItems;

    private List<String> applicableItems;

    private String unit;

    private String giftClaimRedirectUrl;

    private java.util.Map<String, Object> metadata;

    private Boolean includedInMrr;

    private Status status;

    private Boolean isPercentagePricing;

    private BundleConfigurationParams bundleConfiguration;

    private List<BundleItemsToAddParams> bundleItemsToAdd;

    private List<BundleItemsToUpdateParams> bundleItemsToUpdate;

    private List<BundleItemsToRemoveParams> bundleItemsToRemove;

    private Map<String, String> customFields = new LinkedHashMap<>();

    private ItemUpdateBuilder() {}

    public ItemUpdateBuilder name(String value) {
      this.name = value;
      return this;
    }

    public ItemUpdateBuilder description(String value) {
      this.description = value;
      return this;
    }

    public ItemUpdateBuilder isShippable(Boolean value) {
      this.isShippable = value;
      return this;
    }

    public ItemUpdateBuilder externalName(String value) {
      this.externalName = value;
      return this;
    }

    public ItemUpdateBuilder itemFamilyId(String value) {
      this.itemFamilyId = value;
      return this;
    }

    public ItemUpdateBuilder enabledInPortal(Boolean value) {
      this.enabledInPortal = value;
      return this;
    }

    public ItemUpdateBuilder redirectUrl(String value) {
      this.redirectUrl = value;
      return this;
    }

    public ItemUpdateBuilder enabledForCheckout(Boolean value) {
      this.enabledForCheckout = value;
      return this;
    }

    public ItemUpdateBuilder itemApplicability(ItemApplicability value) {
      this.itemApplicability = value;
      return this;
    }

    @Deprecated
    public ItemUpdateBuilder clearApplicableItems(Boolean value) {
      this.clearApplicableItems = value;
      return this;
    }

    public ItemUpdateBuilder applicableItems(List<String> value) {
      this.applicableItems = value;
      return this;
    }

    public ItemUpdateBuilder unit(String value) {
      this.unit = value;
      return this;
    }

    public ItemUpdateBuilder giftClaimRedirectUrl(String value) {
      this.giftClaimRedirectUrl = value;
      return this;
    }

    public ItemUpdateBuilder metadata(java.util.Map<String, Object> value) {
      this.metadata = value;
      return this;
    }

    public ItemUpdateBuilder includedInMrr(Boolean value) {
      this.includedInMrr = value;
      return this;
    }

    public ItemUpdateBuilder status(Status value) {
      this.status = value;
      return this;
    }

    public ItemUpdateBuilder isPercentagePricing(Boolean value) {
      this.isPercentagePricing = value;
      return this;
    }

    public ItemUpdateBuilder bundleConfiguration(BundleConfigurationParams value) {
      this.bundleConfiguration = value;
      return this;
    }

    public ItemUpdateBuilder bundleItemsToAdd(List<BundleItemsToAddParams> value) {
      this.bundleItemsToAdd = value;
      return this;
    }

    public ItemUpdateBuilder bundleItemsToUpdate(List<BundleItemsToUpdateParams> value) {
      this.bundleItemsToUpdate = value;
      return this;
    }

    public ItemUpdateBuilder bundleItemsToRemove(List<BundleItemsToRemoveParams> value) {
      this.bundleItemsToRemove = value;
      return this;
    }

    /**
     * Add a custom field to the request. Custom fields must start with "cf_".
     *
     * @param fieldName the name of the custom field (e.g., "cf_custom_field_name")
     * @param value the value of the custom field
     * @return this builder
     * @throws IllegalArgumentException if fieldName doesn't start with "cf_"
     */
    public ItemUpdateBuilder customField(String fieldName, String value) {
      if (fieldName == null || !fieldName.startsWith("cf_")) {
        throw new IllegalArgumentException("Custom field name must start with 'cf_'");
      }
      this.customFields.put(fieldName, value);
      return this;
    }

    /**
     * Add multiple custom fields to the request. All field names must start with "cf_".
     *
     * @param customFields map of custom field names to values
     * @return this builder
     * @throws IllegalArgumentException if any field name doesn't start with "cf_"
     */
    public ItemUpdateBuilder customFields(Map<String, String> customFields) {
      if (customFields != null) {
        for (Map.Entry<String, String> entry : customFields.entrySet()) {
          if (entry.getKey() == null || !entry.getKey().startsWith("cf_")) {
            throw new IllegalArgumentException(
                "Custom field name must start with 'cf_': " + entry.getKey());
          }
          this.customFields.put(entry.getKey(), entry.getValue());
        }
      }
      return this;
    }

    public ItemUpdateParams build() {
      return new ItemUpdateParams(this);
    }
  }

  public enum ItemApplicability {
    ALL("all"),

    RESTRICTED("restricted"),

    /** An enum member indicating that ItemApplicability was instantiated with an unknown value. */
    _UNKNOWN(null);
    private final String value;

    ItemApplicability(String value) {
      this.value = value;
    }

    public String getValue() {
      return value;
    }

    public static ItemApplicability fromString(String value) {
      if (value == null) return _UNKNOWN;
      for (ItemApplicability enumValue : ItemApplicability.values()) {
        if (enumValue.value != null && enumValue.value.equals(value)) {
          return enumValue;
        }
      }
      return _UNKNOWN;
    }
  }

  public enum Status {
    ACTIVE("active"),

    ARCHIVED("archived"),

    /** An enum member indicating that Status was instantiated with an unknown value. */
    _UNKNOWN(null);
    private final String value;

    Status(String value) {
      this.value = value;
    }

    public String getValue() {
      return value;
    }

    public static Status fromString(String value) {
      if (value == null) return _UNKNOWN;
      for (Status enumValue : Status.values()) {
        if (enumValue.value != null && enumValue.value.equals(value)) {
          return enumValue;
        }
      }
      return _UNKNOWN;
    }
  }

  public static final class BundleConfigurationParams {

    private final Type type;

    private BundleConfigurationParams(BundleConfigurationBuilder builder) {

      this.type = builder.type;
    }

    public Type getType() {
      return type;
    }

    /** Get the form data for this request. */
    public Map<String, Object> toFormData() {
      Map<String, Object> formData = new LinkedHashMap<>();

      if (this.type != null) {

        formData.put("type", this.type);
      }

      return formData;
    }

    /** Create a new builder for BundleConfigurationParams. */
    @Recommended(reason = "Preferred for reusability, validation, and LLM-friendliness")
    public static BundleConfigurationBuilder builder() {
      return new BundleConfigurationBuilder();
    }

    public static final class BundleConfigurationBuilder {

      private Type type;

      private BundleConfigurationBuilder() {}

      public BundleConfigurationBuilder type(Type value) {
        this.type = value;
        return this;
      }

      public BundleConfigurationParams build() {
        return new BundleConfigurationParams(this);
      }
    }

    public enum Type {
      FIXED("fixed"),

      /** An enum member indicating that Type was instantiated with an unknown value. */
      _UNKNOWN(null);
      private final String value;

      Type(String value) {
        this.value = value;
      }

      public String getValue() {
        return value;
      }

      public static Type fromString(String value) {
        if (value == null) return _UNKNOWN;
        for (Type enumValue : Type.values()) {
          if (enumValue.value != null && enumValue.value.equals(value)) {
            return enumValue;
          }
        }
        return _UNKNOWN;
      }
    }
  }

  public static final class BundleItemsToAddParams {

    private final String itemId;

    private final ItemType itemType;

    private final Integer quantity;

    private final BigDecimal priceAllocation;

    private BundleItemsToAddParams(BundleItemsToAddBuilder builder) {

      this.itemId = builder.itemId;

      this.itemType = builder.itemType;

      this.quantity = builder.quantity;

      this.priceAllocation = builder.priceAllocation;
    }

    public String getItemId() {
      return itemId;
    }

    public ItemType getItemType() {
      return itemType;
    }

    public Integer getQuantity() {
      return quantity;
    }

    public BigDecimal getPriceAllocation() {
      return priceAllocation;
    }

    /** Get the form data for this request. */
    public Map<String, Object> toFormData() {
      Map<String, Object> formData = new LinkedHashMap<>();

      if (this.itemId != null) {

        formData.put("item_id", this.itemId);
      }

      if (this.itemType != null) {

        formData.put("item_type", this.itemType);
      }

      if (this.quantity != null) {

        formData.put("quantity", this.quantity);
      }

      if (this.priceAllocation != null) {

        formData.put("price_allocation", this.priceAllocation);
      }

      return formData;
    }

    /** Create a new builder for BundleItemsToAddParams. */
    @Recommended(reason = "Preferred for reusability, validation, and LLM-friendliness")
    public static BundleItemsToAddBuilder builder() {
      return new BundleItemsToAddBuilder();
    }

    public static final class BundleItemsToAddBuilder {

      private String itemId;

      private ItemType itemType;

      private Integer quantity;

      private BigDecimal priceAllocation;

      private BundleItemsToAddBuilder() {}

      public BundleItemsToAddBuilder itemId(String value) {
        this.itemId = value;
        return this;
      }

      public BundleItemsToAddBuilder itemType(ItemType value) {
        this.itemType = value;
        return this;
      }

      public BundleItemsToAddBuilder quantity(Integer value) {
        this.quantity = value;
        return this;
      }

      public BundleItemsToAddBuilder priceAllocation(BigDecimal value) {
        this.priceAllocation = value;
        return this;
      }

      public BundleItemsToAddParams build() {
        return new BundleItemsToAddParams(this);
      }
    }

    public enum ItemType {
      PLAN("plan"),

      ADDON("addon"),

      CHARGE("charge"),

      /** An enum member indicating that ItemType was instantiated with an unknown value. */
      _UNKNOWN(null);
      private final String value;

      ItemType(String value) {
        this.value = value;
      }

      public String getValue() {
        return value;
      }

      public static ItemType fromString(String value) {
        if (value == null) return _UNKNOWN;
        for (ItemType enumValue : ItemType.values()) {
          if (enumValue.value != null && enumValue.value.equals(value)) {
            return enumValue;
          }
        }
        return _UNKNOWN;
      }
    }
  }

  public static final class BundleItemsToUpdateParams {

    private final String itemId;

    private final ItemType itemType;

    private final Integer quantity;

    private final BigDecimal priceAllocation;

    private BundleItemsToUpdateParams(BundleItemsToUpdateBuilder builder) {

      this.itemId = builder.itemId;

      this.itemType = builder.itemType;

      this.quantity = builder.quantity;

      this.priceAllocation = builder.priceAllocation;
    }

    public String getItemId() {
      return itemId;
    }

    public ItemType getItemType() {
      return itemType;
    }

    public Integer getQuantity() {
      return quantity;
    }

    public BigDecimal getPriceAllocation() {
      return priceAllocation;
    }

    /** Get the form data for this request. */
    public Map<String, Object> toFormData() {
      Map<String, Object> formData = new LinkedHashMap<>();

      if (this.itemId != null) {

        formData.put("item_id", this.itemId);
      }

      if (this.itemType != null) {

        formData.put("item_type", this.itemType);
      }

      if (this.quantity != null) {

        formData.put("quantity", this.quantity);
      }

      if (this.priceAllocation != null) {

        formData.put("price_allocation", this.priceAllocation);
      }

      return formData;
    }

    /** Create a new builder for BundleItemsToUpdateParams. */
    @Recommended(reason = "Preferred for reusability, validation, and LLM-friendliness")
    public static BundleItemsToUpdateBuilder builder() {
      return new BundleItemsToUpdateBuilder();
    }

    public static final class BundleItemsToUpdateBuilder {

      private String itemId;

      private ItemType itemType;

      private Integer quantity;

      private BigDecimal priceAllocation;

      private BundleItemsToUpdateBuilder() {}

      public BundleItemsToUpdateBuilder itemId(String value) {
        this.itemId = value;
        return this;
      }

      public BundleItemsToUpdateBuilder itemType(ItemType value) {
        this.itemType = value;
        return this;
      }

      public BundleItemsToUpdateBuilder quantity(Integer value) {
        this.quantity = value;
        return this;
      }

      public BundleItemsToUpdateBuilder priceAllocation(BigDecimal value) {
        this.priceAllocation = value;
        return this;
      }

      public BundleItemsToUpdateParams build() {
        return new BundleItemsToUpdateParams(this);
      }
    }

    public enum ItemType {
      PLAN("plan"),

      ADDON("addon"),

      CHARGE("charge"),

      /** An enum member indicating that ItemType was instantiated with an unknown value. */
      _UNKNOWN(null);
      private final String value;

      ItemType(String value) {
        this.value = value;
      }

      public String getValue() {
        return value;
      }

      public static ItemType fromString(String value) {
        if (value == null) return _UNKNOWN;
        for (ItemType enumValue : ItemType.values()) {
          if (enumValue.value != null && enumValue.value.equals(value)) {
            return enumValue;
          }
        }
        return _UNKNOWN;
      }
    }
  }

  public static final class BundleItemsToRemoveParams {

    private final String itemId;

    private final ItemType itemType;

    private BundleItemsToRemoveParams(BundleItemsToRemoveBuilder builder) {

      this.itemId = builder.itemId;

      this.itemType = builder.itemType;
    }

    public String getItemId() {
      return itemId;
    }

    public ItemType getItemType() {
      return itemType;
    }

    /** Get the form data for this request. */
    public Map<String, Object> toFormData() {
      Map<String, Object> formData = new LinkedHashMap<>();

      if (this.itemId != null) {

        formData.put("item_id", this.itemId);
      }

      if (this.itemType != null) {

        formData.put("item_type", this.itemType);
      }

      return formData;
    }

    /** Create a new builder for BundleItemsToRemoveParams. */
    @Recommended(reason = "Preferred for reusability, validation, and LLM-friendliness")
    public static BundleItemsToRemoveBuilder builder() {
      return new BundleItemsToRemoveBuilder();
    }

    public static final class BundleItemsToRemoveBuilder {

      private String itemId;

      private ItemType itemType;

      private BundleItemsToRemoveBuilder() {}

      public BundleItemsToRemoveBuilder itemId(String value) {
        this.itemId = value;
        return this;
      }

      public BundleItemsToRemoveBuilder itemType(ItemType value) {
        this.itemType = value;
        return this;
      }

      public BundleItemsToRemoveParams build() {
        return new BundleItemsToRemoveParams(this);
      }
    }

    public enum ItemType {
      PLAN("plan"),

      ADDON("addon"),

      CHARGE("charge"),

      /** An enum member indicating that ItemType was instantiated with an unknown value. */
      _UNKNOWN(null);
      private final String value;

      ItemType(String value) {
        this.value = value;
      }

      public String getValue() {
        return value;
      }

      public static ItemType fromString(String value) {
        if (value == null) return _UNKNOWN;
        for (ItemType enumValue : ItemType.values()) {
          if (enumValue.value != null && enumValue.value.equals(value)) {
            return enumValue;
          }
        }
        return _UNKNOWN;
      }
    }
  }
}
