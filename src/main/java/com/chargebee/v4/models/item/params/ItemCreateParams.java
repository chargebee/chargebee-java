/*
 * This file is auto-generated by Chargebee.
 * For more information on how to make changes to this file, please see the README.
 * Reach out to dx@chargebee.com for any questions.
 * Copyright 2025 Chargebee Inc.
 */
package com.chargebee.v4.models.item.params;

import com.chargebee.v4.internal.Recommended;
import com.chargebee.v4.internal.JsonUtil;

import java.math.BigDecimal;
import java.util.Collections;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.List;

public final class ItemCreateParams {

  private final String id;

  private final String name;

  private final Type type;

  private final String description;

  private final String itemFamilyId;

  private final Boolean isGiftable;

  private final Boolean isShippable;

  private final String externalName;

  private final Boolean enabledInPortal;

  private final String redirectUrl;

  private final Boolean enabledForCheckout;

  private final ItemApplicability itemApplicability;

  private final List<String> applicableItems;

  private final String unit;

  private final String giftClaimRedirectUrl;

  private final Boolean includedInMrr;

  private final Boolean metered;

  private final UsageCalculation usageCalculation;

  private final Boolean isPercentagePricing;

  private final java.util.Map<String, Object> metadata;

  private final String businessEntityId;

  private final BundleConfigurationParams bundleConfiguration;

  private final List<BundleItemsToAddParams> bundleItemsToAdd;

  private final Map<String, String> customFields;

  private ItemCreateParams(ItemCreateBuilder builder) {

    this.id = builder.id;

    this.name = builder.name;

    this.type = builder.type;

    this.description = builder.description;

    this.itemFamilyId = builder.itemFamilyId;

    this.isGiftable = builder.isGiftable;

    this.isShippable = builder.isShippable;

    this.externalName = builder.externalName;

    this.enabledInPortal = builder.enabledInPortal;

    this.redirectUrl = builder.redirectUrl;

    this.enabledForCheckout = builder.enabledForCheckout;

    this.itemApplicability = builder.itemApplicability;

    this.applicableItems = builder.applicableItems;

    this.unit = builder.unit;

    this.giftClaimRedirectUrl = builder.giftClaimRedirectUrl;

    this.includedInMrr = builder.includedInMrr;

    this.metered = builder.metered;

    this.usageCalculation = builder.usageCalculation;

    this.isPercentagePricing = builder.isPercentagePricing;

    this.metadata = builder.metadata;

    this.businessEntityId = builder.businessEntityId;

    this.bundleConfiguration = builder.bundleConfiguration;

    this.bundleItemsToAdd = builder.bundleItemsToAdd;

    this.customFields =
        builder.customFields.isEmpty()
            ? Collections.emptyMap()
            : Collections.unmodifiableMap(new LinkedHashMap<>(builder.customFields));
  }

  public String getId() {
    return id;
  }

  public String getName() {
    return name;
  }

  public Type getType() {
    return type;
  }

  public String getDescription() {
    return description;
  }

  public String getItemFamilyId() {
    return itemFamilyId;
  }

  public Boolean getIsGiftable() {
    return isGiftable;
  }

  public Boolean getIsShippable() {
    return isShippable;
  }

  public String getExternalName() {
    return externalName;
  }

  public Boolean getEnabledInPortal() {
    return enabledInPortal;
  }

  public String getRedirectUrl() {
    return redirectUrl;
  }

  public Boolean getEnabledForCheckout() {
    return enabledForCheckout;
  }

  public ItemApplicability getItemApplicability() {
    return itemApplicability;
  }

  public List<String> getApplicableItems() {
    return applicableItems;
  }

  public String getUnit() {
    return unit;
  }

  public String getGiftClaimRedirectUrl() {
    return giftClaimRedirectUrl;
  }

  public Boolean getIncludedInMrr() {
    return includedInMrr;
  }

  public Boolean getMetered() {
    return metered;
  }

  public UsageCalculation getUsageCalculation() {
    return usageCalculation;
  }

  public Boolean getIsPercentagePricing() {
    return isPercentagePricing;
  }

  public java.util.Map<String, Object> getMetadata() {
    return metadata;
  }

  public String getBusinessEntityId() {
    return businessEntityId;
  }

  public BundleConfigurationParams getBundleConfiguration() {
    return bundleConfiguration;
  }

  public List<BundleItemsToAddParams> getBundleItemsToAdd() {
    return bundleItemsToAdd;
  }

  public Map<String, String> customFields() {
    return customFields;
  }

  /** Get the form data for this request. */
  public Map<String, Object> toFormData() {
    Map<String, Object> formData = new LinkedHashMap<>();

    if (this.id != null) {

      formData.put("id", this.id);
    }

    if (this.name != null) {

      formData.put("name", this.name);
    }

    if (this.type != null) {

      formData.put("type", this.type);
    }

    if (this.description != null) {

      formData.put("description", this.description);
    }

    if (this.itemFamilyId != null) {

      formData.put("item_family_id", this.itemFamilyId);
    }

    if (this.isGiftable != null) {

      formData.put("is_giftable", this.isGiftable);
    }

    if (this.isShippable != null) {

      formData.put("is_shippable", this.isShippable);
    }

    if (this.externalName != null) {

      formData.put("external_name", this.externalName);
    }

    if (this.enabledInPortal != null) {

      formData.put("enabled_in_portal", this.enabledInPortal);
    }

    if (this.redirectUrl != null) {

      formData.put("redirect_url", this.redirectUrl);
    }

    if (this.enabledForCheckout != null) {

      formData.put("enabled_for_checkout", this.enabledForCheckout);
    }

    if (this.itemApplicability != null) {

      formData.put("item_applicability", this.itemApplicability);
    }

    if (this.applicableItems != null) {

      formData.put("applicable_items", this.applicableItems);
    }

    if (this.unit != null) {

      formData.put("unit", this.unit);
    }

    if (this.giftClaimRedirectUrl != null) {

      formData.put("gift_claim_redirect_url", this.giftClaimRedirectUrl);
    }

    if (this.includedInMrr != null) {

      formData.put("included_in_mrr", this.includedInMrr);
    }

    if (this.metered != null) {

      formData.put("metered", this.metered);
    }

    if (this.usageCalculation != null) {

      formData.put("usage_calculation", this.usageCalculation);
    }

    if (this.isPercentagePricing != null) {

      formData.put("is_percentage_pricing", this.isPercentagePricing);
    }

    if (this.metadata != null) {

      formData.put("metadata", JsonUtil.toJson(this.metadata));
    }

    if (this.businessEntityId != null) {

      formData.put("business_entity_id", this.businessEntityId);
    }

    if (this.bundleConfiguration != null) {

      // Single object
      Map<String, Object> nestedData = this.bundleConfiguration.toFormData();
      for (Map.Entry<String, Object> entry : nestedData.entrySet()) {
        String nestedKey = "bundle_configuration[" + entry.getKey() + "]";
        formData.put(nestedKey, entry.getValue());
      }
    }

    if (this.bundleItemsToAdd != null) {

      // List of objects
      for (int i = 0; i < this.bundleItemsToAdd.size(); i++) {
        BundleItemsToAddParams item = this.bundleItemsToAdd.get(i);
        if (item != null) {
          Map<String, Object> itemData = item.toFormData();
          for (Map.Entry<String, Object> entry : itemData.entrySet()) {
            String indexedKey = "bundle_items_to_add[" + entry.getKey() + "][" + i + "]";
            formData.put(indexedKey, entry.getValue());
          }
        }
      }
    }

    formData.putAll(customFields);

    return formData;
  }

  /** Create a new builder for ItemCreateParams. */
  @Recommended(reason = "Preferred for reusability, validation, and LLM-friendliness")
  public static ItemCreateBuilder builder() {
    return new ItemCreateBuilder();
  }

  public static final class ItemCreateBuilder {

    private String id;

    private String name;

    private Type type;

    private String description;

    private String itemFamilyId;

    private Boolean isGiftable;

    private Boolean isShippable;

    private String externalName;

    private Boolean enabledInPortal;

    private String redirectUrl;

    private Boolean enabledForCheckout;

    private ItemApplicability itemApplicability;

    private List<String> applicableItems;

    private String unit;

    private String giftClaimRedirectUrl;

    private Boolean includedInMrr;

    private Boolean metered;

    private UsageCalculation usageCalculation;

    private Boolean isPercentagePricing;

    private java.util.Map<String, Object> metadata;

    private String businessEntityId;

    private BundleConfigurationParams bundleConfiguration;

    private List<BundleItemsToAddParams> bundleItemsToAdd;

    private Map<String, String> customFields = new LinkedHashMap<>();

    private ItemCreateBuilder() {}

    public ItemCreateBuilder id(String value) {
      this.id = value;
      return this;
    }

    public ItemCreateBuilder name(String value) {
      this.name = value;
      return this;
    }

    public ItemCreateBuilder type(Type value) {
      this.type = value;
      return this;
    }

    public ItemCreateBuilder description(String value) {
      this.description = value;
      return this;
    }

    public ItemCreateBuilder itemFamilyId(String value) {
      this.itemFamilyId = value;
      return this;
    }

    public ItemCreateBuilder isGiftable(Boolean value) {
      this.isGiftable = value;
      return this;
    }

    public ItemCreateBuilder isShippable(Boolean value) {
      this.isShippable = value;
      return this;
    }

    public ItemCreateBuilder externalName(String value) {
      this.externalName = value;
      return this;
    }

    public ItemCreateBuilder enabledInPortal(Boolean value) {
      this.enabledInPortal = value;
      return this;
    }

    public ItemCreateBuilder redirectUrl(String value) {
      this.redirectUrl = value;
      return this;
    }

    public ItemCreateBuilder enabledForCheckout(Boolean value) {
      this.enabledForCheckout = value;
      return this;
    }

    public ItemCreateBuilder itemApplicability(ItemApplicability value) {
      this.itemApplicability = value;
      return this;
    }

    public ItemCreateBuilder applicableItems(List<String> value) {
      this.applicableItems = value;
      return this;
    }

    public ItemCreateBuilder unit(String value) {
      this.unit = value;
      return this;
    }

    public ItemCreateBuilder giftClaimRedirectUrl(String value) {
      this.giftClaimRedirectUrl = value;
      return this;
    }

    public ItemCreateBuilder includedInMrr(Boolean value) {
      this.includedInMrr = value;
      return this;
    }

    public ItemCreateBuilder metered(Boolean value) {
      this.metered = value;
      return this;
    }

    public ItemCreateBuilder usageCalculation(UsageCalculation value) {
      this.usageCalculation = value;
      return this;
    }

    public ItemCreateBuilder isPercentagePricing(Boolean value) {
      this.isPercentagePricing = value;
      return this;
    }

    public ItemCreateBuilder metadata(java.util.Map<String, Object> value) {
      this.metadata = value;
      return this;
    }

    public ItemCreateBuilder businessEntityId(String value) {
      this.businessEntityId = value;
      return this;
    }

    public ItemCreateBuilder bundleConfiguration(BundleConfigurationParams value) {
      this.bundleConfiguration = value;
      return this;
    }

    public ItemCreateBuilder bundleItemsToAdd(List<BundleItemsToAddParams> value) {
      this.bundleItemsToAdd = value;
      return this;
    }

    /**
     * Add a custom field to the request. Custom fields must start with "cf_".
     *
     * @param fieldName the name of the custom field (e.g., "cf_custom_field_name")
     * @param value the value of the custom field
     * @return this builder
     * @throws IllegalArgumentException if fieldName doesn't start with "cf_"
     */
    public ItemCreateBuilder customField(String fieldName, String value) {
      if (fieldName == null || !fieldName.startsWith("cf_")) {
        throw new IllegalArgumentException("Custom field name must start with 'cf_'");
      }
      this.customFields.put(fieldName, value);
      return this;
    }

    /**
     * Add multiple custom fields to the request. All field names must start with "cf_".
     *
     * @param customFields map of custom field names to values
     * @return this builder
     * @throws IllegalArgumentException if any field name doesn't start with "cf_"
     */
    public ItemCreateBuilder customFields(Map<String, String> customFields) {
      if (customFields != null) {
        for (Map.Entry<String, String> entry : customFields.entrySet()) {
          if (entry.getKey() == null || !entry.getKey().startsWith("cf_")) {
            throw new IllegalArgumentException(
                "Custom field name must start with 'cf_': " + entry.getKey());
          }
          this.customFields.put(entry.getKey(), entry.getValue());
        }
      }
      return this;
    }

    public ItemCreateParams build() {
      return new ItemCreateParams(this);
    }
  }

  public enum Type {
    PLAN("plan"),

    ADDON("addon"),

    CHARGE("charge"),

    /** An enum member indicating that Type was instantiated with an unknown value. */
    _UNKNOWN(null);
    private final String value;

    Type(String value) {
      this.value = value;
    }

    public String getValue() {
      return value;
    }

    public static Type fromString(String value) {
      if (value == null) return _UNKNOWN;
      for (Type enumValue : Type.values()) {
        if (enumValue.value != null && enumValue.value.equals(value)) {
          return enumValue;
        }
      }
      return _UNKNOWN;
    }
  }

  public enum ItemApplicability {
    ALL("all"),

    RESTRICTED("restricted"),

    /** An enum member indicating that ItemApplicability was instantiated with an unknown value. */
    _UNKNOWN(null);
    private final String value;

    ItemApplicability(String value) {
      this.value = value;
    }

    public String getValue() {
      return value;
    }

    public static ItemApplicability fromString(String value) {
      if (value == null) return _UNKNOWN;
      for (ItemApplicability enumValue : ItemApplicability.values()) {
        if (enumValue.value != null && enumValue.value.equals(value)) {
          return enumValue;
        }
      }
      return _UNKNOWN;
    }
  }

  public enum UsageCalculation {
    SUM_OF_USAGES("sum_of_usages"),

    LAST_USAGE("last_usage"),

    MAX_USAGE("max_usage"),

    /** An enum member indicating that UsageCalculation was instantiated with an unknown value. */
    _UNKNOWN(null);
    private final String value;

    UsageCalculation(String value) {
      this.value = value;
    }

    public String getValue() {
      return value;
    }

    public static UsageCalculation fromString(String value) {
      if (value == null) return _UNKNOWN;
      for (UsageCalculation enumValue : UsageCalculation.values()) {
        if (enumValue.value != null && enumValue.value.equals(value)) {
          return enumValue;
        }
      }
      return _UNKNOWN;
    }
  }

  public static final class BundleConfigurationParams {

    private final Type type;

    private BundleConfigurationParams(BundleConfigurationBuilder builder) {

      this.type = builder.type;
    }

    public Type getType() {
      return type;
    }

    /** Get the form data for this request. */
    public Map<String, Object> toFormData() {
      Map<String, Object> formData = new LinkedHashMap<>();

      if (this.type != null) {

        formData.put("type", this.type);
      }

      return formData;
    }

    /** Create a new builder for BundleConfigurationParams. */
    @Recommended(reason = "Preferred for reusability, validation, and LLM-friendliness")
    public static BundleConfigurationBuilder builder() {
      return new BundleConfigurationBuilder();
    }

    public static final class BundleConfigurationBuilder {

      private Type type;

      private BundleConfigurationBuilder() {}

      public BundleConfigurationBuilder type(Type value) {
        this.type = value;
        return this;
      }

      public BundleConfigurationParams build() {
        return new BundleConfigurationParams(this);
      }
    }

    public enum Type {
      FIXED("fixed"),

      /** An enum member indicating that Type was instantiated with an unknown value. */
      _UNKNOWN(null);
      private final String value;

      Type(String value) {
        this.value = value;
      }

      public String getValue() {
        return value;
      }

      public static Type fromString(String value) {
        if (value == null) return _UNKNOWN;
        for (Type enumValue : Type.values()) {
          if (enumValue.value != null && enumValue.value.equals(value)) {
            return enumValue;
          }
        }
        return _UNKNOWN;
      }
    }
  }

  public static final class BundleItemsToAddParams {

    private final String itemId;

    private final ItemType itemType;

    private final Integer quantity;

    private final BigDecimal priceAllocation;

    private BundleItemsToAddParams(BundleItemsToAddBuilder builder) {

      this.itemId = builder.itemId;

      this.itemType = builder.itemType;

      this.quantity = builder.quantity;

      this.priceAllocation = builder.priceAllocation;
    }

    public String getItemId() {
      return itemId;
    }

    public ItemType getItemType() {
      return itemType;
    }

    public Integer getQuantity() {
      return quantity;
    }

    public BigDecimal getPriceAllocation() {
      return priceAllocation;
    }

    /** Get the form data for this request. */
    public Map<String, Object> toFormData() {
      Map<String, Object> formData = new LinkedHashMap<>();

      if (this.itemId != null) {

        formData.put("item_id", this.itemId);
      }

      if (this.itemType != null) {

        formData.put("item_type", this.itemType);
      }

      if (this.quantity != null) {

        formData.put("quantity", this.quantity);
      }

      if (this.priceAllocation != null) {

        formData.put("price_allocation", this.priceAllocation);
      }

      return formData;
    }

    /** Create a new builder for BundleItemsToAddParams. */
    @Recommended(reason = "Preferred for reusability, validation, and LLM-friendliness")
    public static BundleItemsToAddBuilder builder() {
      return new BundleItemsToAddBuilder();
    }

    public static final class BundleItemsToAddBuilder {

      private String itemId;

      private ItemType itemType;

      private Integer quantity;

      private BigDecimal priceAllocation;

      private BundleItemsToAddBuilder() {}

      public BundleItemsToAddBuilder itemId(String value) {
        this.itemId = value;
        return this;
      }

      public BundleItemsToAddBuilder itemType(ItemType value) {
        this.itemType = value;
        return this;
      }

      public BundleItemsToAddBuilder quantity(Integer value) {
        this.quantity = value;
        return this;
      }

      public BundleItemsToAddBuilder priceAllocation(BigDecimal value) {
        this.priceAllocation = value;
        return this;
      }

      public BundleItemsToAddParams build() {
        return new BundleItemsToAddParams(this);
      }
    }

    public enum ItemType {
      PLAN("plan"),

      ADDON("addon"),

      CHARGE("charge"),

      /** An enum member indicating that ItemType was instantiated with an unknown value. */
      _UNKNOWN(null);
      private final String value;

      ItemType(String value) {
        this.value = value;
      }

      public String getValue() {
        return value;
      }

      public static ItemType fromString(String value) {
        if (value == null) return _UNKNOWN;
        for (ItemType enumValue : ItemType.values()) {
          if (enumValue.value != null && enumValue.value.equals(value)) {
            return enumValue;
          }
        }
        return _UNKNOWN;
      }
    }
  }
}
