/*
 * This file is auto-generated by Chargebee.
 * For more information on how to make changes to this file, please see the README.
 * Reach out to dx@chargebee.com for any questions.
 * Copyright 2025 Chargebee Inc.
 */

package com.chargebee.v4.models.item;

import com.chargebee.v4.internal.JsonUtil;
import java.math.BigDecimal;
import java.sql.Timestamp;
import java.util.List;

public class Item {

  private String id;
  private String name;
  private String externalName;
  private String description;
  private Status status;
  private Long resourceVersion;
  private Timestamp updatedAt;
  private String itemFamilyId;
  private Type type;
  private Boolean isShippable;
  private Boolean isGiftable;
  private String redirectUrl;
  private Boolean enabledForCheckout;
  private Boolean enabledInPortal;
  private Boolean includedInMrr;
  private ItemApplicability itemApplicability;
  private String giftClaimRedirectUrl;
  private String unit;
  private Boolean metered;
  private UsageCalculation usageCalculation;
  private Boolean isPercentagePricing;
  private Timestamp archivedAt;
  private Channel channel;
  private java.util.Map<String, Object> metadata;
  private Boolean deleted;
  private String businessEntityId;
  private List<ApplicableItems> applicableItems;
  private List<BundleItems> bundleItems;
  private BundleConfiguration bundleConfiguration;

  private java.util.Map<String, Object> customFields = new java.util.HashMap<>();

  public String getId() {
    return id;
  }

  public String getName() {
    return name;
  }

  public String getExternalName() {
    return externalName;
  }

  public String getDescription() {
    return description;
  }

  public Status getStatus() {
    return status;
  }

  public Long getResourceVersion() {
    return resourceVersion;
  }

  public Timestamp getUpdatedAt() {
    return updatedAt;
  }

  public String getItemFamilyId() {
    return itemFamilyId;
  }

  public Type getType() {
    return type;
  }

  public Boolean getIsShippable() {
    return isShippable;
  }

  public Boolean getIsGiftable() {
    return isGiftable;
  }

  public String getRedirectUrl() {
    return redirectUrl;
  }

  public Boolean getEnabledForCheckout() {
    return enabledForCheckout;
  }

  public Boolean getEnabledInPortal() {
    return enabledInPortal;
  }

  public Boolean getIncludedInMrr() {
    return includedInMrr;
  }

  public ItemApplicability getItemApplicability() {
    return itemApplicability;
  }

  public String getGiftClaimRedirectUrl() {
    return giftClaimRedirectUrl;
  }

  public String getUnit() {
    return unit;
  }

  public Boolean getMetered() {
    return metered;
  }

  public UsageCalculation getUsageCalculation() {
    return usageCalculation;
  }

  public Boolean getIsPercentagePricing() {
    return isPercentagePricing;
  }

  public Timestamp getArchivedAt() {
    return archivedAt;
  }

  public Channel getChannel() {
    return channel;
  }

  public java.util.Map<String, Object> getMetadata() {
    return metadata;
  }

  public Boolean getDeleted() {
    return deleted;
  }

  public String getBusinessEntityId() {
    return businessEntityId;
  }

  public List<ApplicableItems> getApplicableItems() {
    return applicableItems;
  }

  public List<BundleItems> getBundleItems() {
    return bundleItems;
  }

  public BundleConfiguration getBundleConfiguration() {
    return bundleConfiguration;
  }

  /**
   * Returns a map of custom fields. Custom fields are dynamic properties that follow the pattern
   * cf_* (e.g., cf_custom_field_name).
   *
   * @return map containing all custom fields
   */
  public java.util.Map<String, Object> getCustomFields() {
    return customFields;
  }

  /**
   * Returns the value of a specific custom field.
   *
   * @param fieldName the name of the custom field (e.g., "cf_custom_field_name")
   * @return the value of the custom field, or null if not present
   */
  public Object getCustomField(String fieldName) {
    return customFields.get(fieldName);
  }

  public enum Status {
    ACTIVE("active"),

    ARCHIVED("archived"),

    DELETED("deleted"),

    /** An enum member indicating that Status was instantiated with an unknown value. */
    _UNKNOWN(null);
    private final String value;

    Status(String value) {
      this.value = value;
    }

    public String getValue() {
      return value;
    }

    public static Status fromString(String value) {
      if (value == null) return _UNKNOWN;
      for (Status enumValue : Status.values()) {
        if (enumValue.value != null && enumValue.value.equals(value)) {
          return enumValue;
        }
      }
      return _UNKNOWN;
    }
  }

  public enum Type {
    PLAN("plan"),

    ADDON("addon"),

    CHARGE("charge"),

    /** An enum member indicating that Type was instantiated with an unknown value. */
    _UNKNOWN(null);
    private final String value;

    Type(String value) {
      this.value = value;
    }

    public String getValue() {
      return value;
    }

    public static Type fromString(String value) {
      if (value == null) return _UNKNOWN;
      for (Type enumValue : Type.values()) {
        if (enumValue.value != null && enumValue.value.equals(value)) {
          return enumValue;
        }
      }
      return _UNKNOWN;
    }
  }

  public enum ItemApplicability {
    ALL("all"),

    RESTRICTED("restricted"),

    /** An enum member indicating that ItemApplicability was instantiated with an unknown value. */
    _UNKNOWN(null);
    private final String value;

    ItemApplicability(String value) {
      this.value = value;
    }

    public String getValue() {
      return value;
    }

    public static ItemApplicability fromString(String value) {
      if (value == null) return _UNKNOWN;
      for (ItemApplicability enumValue : ItemApplicability.values()) {
        if (enumValue.value != null && enumValue.value.equals(value)) {
          return enumValue;
        }
      }
      return _UNKNOWN;
    }
  }

  public enum UsageCalculation {
    SUM_OF_USAGES("sum_of_usages"),

    LAST_USAGE("last_usage"),

    MAX_USAGE("max_usage"),

    /** An enum member indicating that UsageCalculation was instantiated with an unknown value. */
    _UNKNOWN(null);
    private final String value;

    UsageCalculation(String value) {
      this.value = value;
    }

    public String getValue() {
      return value;
    }

    public static UsageCalculation fromString(String value) {
      if (value == null) return _UNKNOWN;
      for (UsageCalculation enumValue : UsageCalculation.values()) {
        if (enumValue.value != null && enumValue.value.equals(value)) {
          return enumValue;
        }
      }
      return _UNKNOWN;
    }
  }

  public enum Channel {
    WEB("web"),

    APP_STORE("app_store"),

    PLAY_STORE("play_store"),

    /** An enum member indicating that Channel was instantiated with an unknown value. */
    _UNKNOWN(null);
    private final String value;

    Channel(String value) {
      this.value = value;
    }

    public String getValue() {
      return value;
    }

    public static Channel fromString(String value) {
      if (value == null) return _UNKNOWN;
      for (Channel enumValue : Channel.values()) {
        if (enumValue.value != null && enumValue.value.equals(value)) {
          return enumValue;
        }
      }
      return _UNKNOWN;
    }
  }

  public static Item fromJson(String json) {
    Item obj = new Item();

    // Parse JSON to extract all keys
    java.util.Set<String> knownFields = new java.util.HashSet<>();

    knownFields.add("id");

    knownFields.add("name");

    knownFields.add("external_name");

    knownFields.add("description");

    knownFields.add("status");

    knownFields.add("resource_version");

    knownFields.add("updated_at");

    knownFields.add("item_family_id");

    knownFields.add("type");

    knownFields.add("is_shippable");

    knownFields.add("is_giftable");

    knownFields.add("redirect_url");

    knownFields.add("enabled_for_checkout");

    knownFields.add("enabled_in_portal");

    knownFields.add("included_in_mrr");

    knownFields.add("item_applicability");

    knownFields.add("gift_claim_redirect_url");

    knownFields.add("unit");

    knownFields.add("metered");

    knownFields.add("usage_calculation");

    knownFields.add("is_percentage_pricing");

    knownFields.add("archived_at");

    knownFields.add("channel");

    knownFields.add("metadata");

    knownFields.add("deleted");

    knownFields.add("business_entity_id");

    knownFields.add("applicable_items");

    knownFields.add("bundle_items");

    knownFields.add("bundle_configuration");

    obj.id = JsonUtil.getString(json, "id");

    obj.name = JsonUtil.getString(json, "name");

    obj.externalName = JsonUtil.getString(json, "external_name");

    obj.description = JsonUtil.getString(json, "description");

    obj.status = Status.fromString(JsonUtil.getString(json, "status"));

    obj.resourceVersion = JsonUtil.getLong(json, "resource_version");

    obj.updatedAt = JsonUtil.getTimestamp(json, "updated_at");

    obj.itemFamilyId = JsonUtil.getString(json, "item_family_id");

    obj.type = Type.fromString(JsonUtil.getString(json, "type"));

    obj.isShippable = JsonUtil.getBoolean(json, "is_shippable");

    obj.isGiftable = JsonUtil.getBoolean(json, "is_giftable");

    obj.redirectUrl = JsonUtil.getString(json, "redirect_url");

    obj.enabledForCheckout = JsonUtil.getBoolean(json, "enabled_for_checkout");

    obj.enabledInPortal = JsonUtil.getBoolean(json, "enabled_in_portal");

    obj.includedInMrr = JsonUtil.getBoolean(json, "included_in_mrr");

    obj.itemApplicability =
        ItemApplicability.fromString(JsonUtil.getString(json, "item_applicability"));

    obj.giftClaimRedirectUrl = JsonUtil.getString(json, "gift_claim_redirect_url");

    obj.unit = JsonUtil.getString(json, "unit");

    obj.metered = JsonUtil.getBoolean(json, "metered");

    obj.usageCalculation =
        UsageCalculation.fromString(JsonUtil.getString(json, "usage_calculation"));

    obj.isPercentagePricing = JsonUtil.getBoolean(json, "is_percentage_pricing");

    obj.archivedAt = JsonUtil.getTimestamp(json, "archived_at");

    obj.channel = Channel.fromString(JsonUtil.getString(json, "channel"));

    String __metadataJson = JsonUtil.getObject(json, "metadata");
    obj.metadata =
        __metadataJson != null
            ? JsonUtil.parseJsonObjectToMap(__metadataJson)
            : new java.util.HashMap<>();

    obj.deleted = JsonUtil.getBoolean(json, "deleted");

    obj.businessEntityId = JsonUtil.getString(json, "business_entity_id");

    obj.applicableItems =
        JsonUtil.parseObjectArray(JsonUtil.getArray(json, "applicable_items")).stream()
            .map(ApplicableItems::fromJson)
            .collect(java.util.stream.Collectors.toList());

    obj.bundleItems =
        JsonUtil.parseObjectArray(JsonUtil.getArray(json, "bundle_items")).stream()
            .map(BundleItems::fromJson)
            .collect(java.util.stream.Collectors.toList());

    String __bundleConfigurationJson = JsonUtil.getObject(json, "bundle_configuration");
    if (__bundleConfigurationJson != null) {
      obj.bundleConfiguration = BundleConfiguration.fromJson(__bundleConfigurationJson);
    }

    // Extract custom fields (fields starting with cf_)
    obj.customFields = extractCustomFields(json, knownFields);

    return obj;
  }

  /**
   * Helper method to extract custom fields from JSON. Custom fields are fields that start with
   * "cf_" and are not in the known fields set.
   *
   * @param json JSON string to parse
   * @param knownFields set of known field names
   * @return map of custom fields
   */
  private static java.util.Map<String, Object> extractCustomFields(
      String json, java.util.Set<String> knownFields) {
    java.util.Map<String, Object> customFields = new java.util.HashMap<>();
    try {
      // Parse the entire JSON as a map
      java.util.Map<String, Object> allFields = JsonUtil.parseJsonObjectToMap(json);
      if (allFields != null) {
        for (java.util.Map.Entry<String, Object> entry : allFields.entrySet()) {
          String key = entry.getKey();
          // Include fields that start with "cf_" and are not in knownFields
          if (key != null && key.startsWith("cf_") && !knownFields.contains(key)) {
            customFields.put(key, entry.getValue());
          }
        }
      }
    } catch (Exception e) {
      // If parsing fails, return empty map
    }
    return customFields;
  }

  public static class ApplicableItems {

    private String id;

    public String getId() {
      return id;
    }

    public static ApplicableItems fromJson(String json) {
      ApplicableItems obj = new ApplicableItems();

      obj.id = JsonUtil.getString(json, "id");

      return obj;
    }
  }

  public static class BundleItems {

    private String itemId;
    private ItemType itemType;
    private Integer quantity;
    private BigDecimal priceAllocation;

    public String getItemId() {
      return itemId;
    }

    public ItemType getItemType() {
      return itemType;
    }

    public Integer getQuantity() {
      return quantity;
    }

    public BigDecimal getPriceAllocation() {
      return priceAllocation;
    }

    public enum ItemType {
      PLAN("plan"),

      ADDON("addon"),

      CHARGE("charge"),

      /** An enum member indicating that ItemType was instantiated with an unknown value. */
      _UNKNOWN(null);
      private final String value;

      ItemType(String value) {
        this.value = value;
      }

      public String getValue() {
        return value;
      }

      public static ItemType fromString(String value) {
        if (value == null) return _UNKNOWN;
        for (ItemType enumValue : ItemType.values()) {
          if (enumValue.value != null && enumValue.value.equals(value)) {
            return enumValue;
          }
        }
        return _UNKNOWN;
      }
    }

    public static BundleItems fromJson(String json) {
      BundleItems obj = new BundleItems();

      obj.itemId = JsonUtil.getString(json, "item_id");

      obj.itemType = ItemType.fromString(JsonUtil.getString(json, "item_type"));

      obj.quantity = JsonUtil.getInteger(json, "quantity");

      obj.priceAllocation = JsonUtil.getBigDecimal(json, "price_allocation");

      return obj;
    }
  }

  public static class BundleConfiguration {

    private Type type;

    public Type getType() {
      return type;
    }

    public enum Type {
      FIXED("fixed"),

      /** An enum member indicating that Type was instantiated with an unknown value. */
      _UNKNOWN(null);
      private final String value;

      Type(String value) {
        this.value = value;
      }

      public String getValue() {
        return value;
      }

      public static Type fromString(String value) {
        if (value == null) return _UNKNOWN;
        for (Type enumValue : Type.values()) {
          if (enumValue.value != null && enumValue.value.equals(value)) {
            return enumValue;
          }
        }
        return _UNKNOWN;
      }
    }

    public static BundleConfiguration fromJson(String json) {
      BundleConfiguration obj = new BundleConfiguration();

      obj.type = Type.fromString(JsonUtil.getString(json, "type"));

      return obj;
    }
  }
}
