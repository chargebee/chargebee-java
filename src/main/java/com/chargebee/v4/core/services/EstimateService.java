/*
 * This file is auto-generated by Chargebee.
 * For more information on how to make changes to this file, please see the README.
 * Reach out to dx@chargebee.com for any questions.
 * Copyright 2025 Chargebee Inc.
 */

package com.chargebee.v4.core.services;

import com.chargebee.v4.client.ChargebeeClient;
import com.chargebee.v4.client.request.RequestOptions;
import com.chargebee.v4.transport.Response;

import com.chargebee.v4.core.models.estimate.params.EstimateCreateSubItemEstimateParams;

import com.chargebee.v4.core.models.estimate.params.EstimatePaymentSchedulesParams;

import com.chargebee.v4.core.models.estimate.params.EstimateCancelSubscriptionForItemsParams;

import com.chargebee.v4.core.models.estimate.params.EstimateResumeSubscriptionParams;

import com.chargebee.v4.core.models.estimate.params.EstimateCreateInvoiceForItemsParams;

import com.chargebee.v4.core.models.estimate.params.EstimateGiftSubscriptionForItemsParams;

import com.chargebee.v4.core.models.estimate.params.EstimateUpdateSubscriptionForItemsParams;

import com.chargebee.v4.core.models.estimate.params.EstimateRegenerateInvoiceEstimateParams;

import com.chargebee.v4.core.models.estimate.params.EstimateCreateSubItemForCustomerEstimateParams;

import com.chargebee.v4.core.models.estimate.params.EstimateChangeTermEndParams;

import com.chargebee.v4.core.models.estimate.params.EstimatePauseSubscriptionParams;

import com.chargebee.v4.core.models.estimate.params.EstimateAdvanceInvoiceEstimateParams;

import com.chargebee.v4.core.models.estimate.params.EstimateUpdateSubscriptionParams;

import com.chargebee.v4.core.models.estimate.params.EstimateGiftSubscriptionParams;

import com.chargebee.v4.core.models.estimate.params.EstimateCreateSubscriptionParams;

import com.chargebee.v4.core.models.estimate.params.EstimateCreateInvoiceParams;

import com.chargebee.v4.core.models.estimate.params.EstimateCancelSubscriptionParams;

import com.chargebee.v4.core.responses.estimate.EstimateRenewalEstimateResponse;

import com.chargebee.v4.core.responses.estimate.EstimateCreateSubItemEstimateResponse;

import com.chargebee.v4.core.responses.estimate.EstimatePaymentSchedulesResponse;

import com.chargebee.v4.core.responses.estimate.EstimateCancelSubscriptionForItemsResponse;

import com.chargebee.v4.core.responses.estimate.EstimateResumeSubscriptionResponse;

import com.chargebee.v4.core.responses.estimate.EstimateCreateInvoiceForItemsResponse;

import com.chargebee.v4.core.responses.estimate.EstimateGiftSubscriptionForItemsResponse;

import com.chargebee.v4.core.responses.estimate.EstimateUpdateSubscriptionForItemsResponse;

import com.chargebee.v4.core.responses.estimate.EstimateUpcomingInvoicesEstimateResponse;

import com.chargebee.v4.core.responses.estimate.EstimateRegenerateInvoiceEstimateResponse;

import com.chargebee.v4.core.responses.estimate.EstimateCreateSubItemForCustomerEstimateResponse;

import com.chargebee.v4.core.responses.estimate.EstimateChangeTermEndResponse;

import com.chargebee.v4.core.responses.estimate.EstimatePauseSubscriptionResponse;

import com.chargebee.v4.core.responses.estimate.EstimateAdvanceInvoiceEstimateResponse;

import com.chargebee.v4.core.responses.estimate.EstimateUpdateSubscriptionResponse;

import com.chargebee.v4.core.responses.estimate.EstimateGiftSubscriptionResponse;

import com.chargebee.v4.core.responses.estimate.EstimateCreateSubForCustomerEstimateResponse;

import com.chargebee.v4.core.responses.estimate.EstimateCreateSubscriptionResponse;

import com.chargebee.v4.core.responses.estimate.EstimateCreateInvoiceResponse;

import com.chargebee.v4.core.responses.estimate.EstimateCancelSubscriptionResponse;

public final class EstimateService extends BaseService<EstimateService> {

  private final ServiceConfig config;

  public EstimateService(ChargebeeClient client) {
    super(client);
    this.config = ServiceConfig.defaultConfig();
  }

  private EstimateService(ChargebeeClient client, RequestOptions options) {
    super(client, options);
    this.config = ServiceConfig.defaultConfig();
  }

  private EstimateService(ChargebeeClient client, RequestOptions options, ServiceConfig config) {
    super(client, options);
    this.config = config;
  }

  @Override
  EstimateService with(RequestOptions newOptions) {
    return new EstimateService(client, newOptions, config);
  }

  /**
   * Apply per-request options for this service instance. Users can chain .withOptions or .options
   * to set headers and other options.
   */
  public EstimateService withOptions(RequestOptions options) {
    return with(options);
  }

  // === Operations ===

  /** renewalEstimate a estimate (executes immediately) - returns raw Response. */
  Response renewalEstimateRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/renewal_estimate", "subscription-id", subscriptionId);

    return get(path, null);
  }

  public EstimateRenewalEstimateResponse renewalEstimate(String subscriptionId) throws Exception {
    Response response = renewalEstimateRaw(subscriptionId);
    return EstimateRenewalEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createSubItemEstimate a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response createSubItemEstimateRaw(EstimateCreateSubItemEstimateParams params) throws Exception {

    return post(
        "/estimates/create_subscription_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * createSubItemEstimate a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response createSubItemEstimateRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/create_subscription_for_items", jsonPayload);
  }

  public EstimateCreateSubItemEstimateResponse createSubItemEstimate(
      EstimateCreateSubItemEstimateParams params) throws Exception {
    Response response = createSubItemEstimateRaw(params);

    return EstimateCreateSubItemEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * paymentSchedules a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response paymentSchedulesRaw(EstimatePaymentSchedulesParams params) throws Exception {

    return post("/estimates/payment_schedules", params != null ? params.toFormData() : null);
  }

  /**
   * paymentSchedules a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response paymentSchedulesRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/payment_schedules", jsonPayload);
  }

  public EstimatePaymentSchedulesResponse paymentSchedules(EstimatePaymentSchedulesParams params)
      throws Exception {
    Response response = paymentSchedulesRaw(params);

    return EstimatePaymentSchedulesResponse.fromJson(response.getBodyAsString(), response);
  }

  /** cancelSubscriptionForItems a estimate (executes immediately) - returns raw Response. */
  Response cancelSubscriptionForItemsRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_for_items_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * cancelSubscriptionForItems a estimate using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response cancelSubscriptionForItemsRaw(
      String subscriptionId, EstimateCancelSubscriptionForItemsParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_for_items_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * cancelSubscriptionForItems a estimate using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response cancelSubscriptionForItemsRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_for_items_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimateCancelSubscriptionForItemsResponse cancelSubscriptionForItems(
      String subscriptionId, EstimateCancelSubscriptionForItemsParams params) throws Exception {
    Response response = cancelSubscriptionForItemsRaw(subscriptionId, params);
    return EstimateCancelSubscriptionForItemsResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /** resumeSubscription a estimate (executes immediately) - returns raw Response. */
  Response resumeSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume_subscription_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * resumeSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response resumeSubscriptionRaw(String subscriptionId, EstimateResumeSubscriptionParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * resumeSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response resumeSubscriptionRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimateResumeSubscriptionResponse resumeSubscription(
      String subscriptionId, EstimateResumeSubscriptionParams params) throws Exception {
    Response response = resumeSubscriptionRaw(subscriptionId, params);
    return EstimateResumeSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createInvoiceForItems a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response createInvoiceForItemsRaw(EstimateCreateInvoiceForItemsParams params) throws Exception {

    return post("/estimates/create_invoice_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * createInvoiceForItems a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response createInvoiceForItemsRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/create_invoice_for_items", jsonPayload);
  }

  public EstimateCreateInvoiceForItemsResponse createInvoiceForItems(
      EstimateCreateInvoiceForItemsParams params) throws Exception {
    Response response = createInvoiceForItemsRaw(params);

    return EstimateCreateInvoiceForItemsResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * giftSubscriptionForItems a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionForItemsRaw(EstimateGiftSubscriptionForItemsParams params)
      throws Exception {

    return post(
        "/estimates/gift_subscription_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * giftSubscriptionForItems a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionForItemsRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/gift_subscription_for_items", jsonPayload);
  }

  public EstimateGiftSubscriptionForItemsResponse giftSubscriptionForItems(
      EstimateGiftSubscriptionForItemsParams params) throws Exception {
    Response response = giftSubscriptionForItemsRaw(params);

    return EstimateGiftSubscriptionForItemsResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * updateSubscriptionForItems a estimate using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response updateSubscriptionForItemsRaw(EstimateUpdateSubscriptionForItemsParams params)
      throws Exception {

    return post(
        "/estimates/update_subscription_for_items", params != null ? params.toFormData() : null);
  }

  /**
   * updateSubscriptionForItems a estimate using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response updateSubscriptionForItemsRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/update_subscription_for_items", jsonPayload);
  }

  public EstimateUpdateSubscriptionForItemsResponse updateSubscriptionForItems(
      EstimateUpdateSubscriptionForItemsParams params) throws Exception {
    Response response = updateSubscriptionForItemsRaw(params);

    return EstimateUpdateSubscriptionForItemsResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /** upcomingInvoicesEstimate a estimate (executes immediately) - returns raw Response. */
  Response upcomingInvoicesEstimateRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/upcoming_invoices_estimate", "customer-id", customerId);

    return get(path, null);
  }

  public EstimateUpcomingInvoicesEstimateResponse upcomingInvoicesEstimate(String customerId)
      throws Exception {
    Response response = upcomingInvoicesEstimateRaw(customerId);
    return EstimateUpcomingInvoicesEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  /** regenerateInvoiceEstimate a estimate (executes immediately) - returns raw Response. */
  Response regenerateInvoiceEstimateRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * regenerateInvoiceEstimate a estimate using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response regenerateInvoiceEstimateRaw(
      String subscriptionId, EstimateRegenerateInvoiceEstimateParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * regenerateInvoiceEstimate a estimate using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response regenerateInvoiceEstimateRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimateRegenerateInvoiceEstimateResponse regenerateInvoiceEstimate(
      String subscriptionId, EstimateRegenerateInvoiceEstimateParams params) throws Exception {
    Response response = regenerateInvoiceEstimateRaw(subscriptionId, params);
    return EstimateRegenerateInvoiceEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  /** createSubItemForCustomerEstimate a estimate (executes immediately) - returns raw Response. */
  Response createSubItemForCustomerEstimateRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_for_items_estimate",
            "customer-id",
            customerId);

    return post(path, null);
  }

  /**
   * createSubItemForCustomerEstimate a estimate using immutable params (executes immediately) -
   * returns raw Response.
   */
  Response createSubItemForCustomerEstimateRaw(
      String customerId, EstimateCreateSubItemForCustomerEstimateParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_for_items_estimate",
            "customer-id",
            customerId);
    return post(path, params.toFormData());
  }

  /**
   * createSubItemForCustomerEstimate a estimate using raw JSON payload (executes immediately) -
   * returns raw Response.
   */
  Response createSubItemForCustomerEstimateRaw(String customerId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_for_items_estimate",
            "customer-id",
            customerId);
    return postJson(path, jsonPayload);
  }

  public EstimateCreateSubItemForCustomerEstimateResponse createSubItemForCustomerEstimate(
      String customerId, EstimateCreateSubItemForCustomerEstimateParams params) throws Exception {
    Response response = createSubItemForCustomerEstimateRaw(customerId, params);
    return EstimateCreateSubItemForCustomerEstimateResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /** changeTermEnd a estimate (executes immediately) - returns raw Response. */
  Response changeTermEndRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * changeTermEnd a estimate using immutable params (executes immediately) - returns raw Response.
   */
  Response changeTermEndRaw(String subscriptionId, EstimateChangeTermEndParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * changeTermEnd a estimate using raw JSON payload (executes immediately) - returns raw Response.
   */
  Response changeTermEndRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimateChangeTermEndResponse changeTermEnd(
      String subscriptionId, EstimateChangeTermEndParams params) throws Exception {
    Response response = changeTermEndRaw(subscriptionId, params);
    return EstimateChangeTermEndResponse.fromJson(response.getBodyAsString(), response);
  }

  /** pauseSubscription a estimate (executes immediately) - returns raw Response. */
  Response pauseSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause_subscription_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * pauseSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response pauseSubscriptionRaw(String subscriptionId, EstimatePauseSubscriptionParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * pauseSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response pauseSubscriptionRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimatePauseSubscriptionResponse pauseSubscription(
      String subscriptionId, EstimatePauseSubscriptionParams params) throws Exception {
    Response response = pauseSubscriptionRaw(subscriptionId, params);
    return EstimatePauseSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /** advanceInvoiceEstimate a estimate (executes immediately) - returns raw Response. */
  Response advanceInvoiceEstimateRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/advance_invoice_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * advanceInvoiceEstimate a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response advanceInvoiceEstimateRaw(
      String subscriptionId, EstimateAdvanceInvoiceEstimateParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/advance_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * advanceInvoiceEstimate a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response advanceInvoiceEstimateRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/advance_invoice_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimateAdvanceInvoiceEstimateResponse advanceInvoiceEstimate(
      String subscriptionId, EstimateAdvanceInvoiceEstimateParams params) throws Exception {
    Response response = advanceInvoiceEstimateRaw(subscriptionId, params);
    return EstimateAdvanceInvoiceEstimateResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * updateSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response updateSubscriptionRaw(EstimateUpdateSubscriptionParams params) throws Exception {

    return post("/estimates/update_subscription", params != null ? params.toFormData() : null);
  }

  /**
   * updateSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response updateSubscriptionRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/update_subscription", jsonPayload);
  }

  public EstimateUpdateSubscriptionResponse updateSubscription(
      EstimateUpdateSubscriptionParams params) throws Exception {
    Response response = updateSubscriptionRaw(params);

    return EstimateUpdateSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * giftSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionRaw(EstimateGiftSubscriptionParams params) throws Exception {

    return post("/estimates/gift_subscription", params != null ? params.toFormData() : null);
  }

  /**
   * giftSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response giftSubscriptionRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/gift_subscription", jsonPayload);
  }

  public EstimateGiftSubscriptionResponse giftSubscription(EstimateGiftSubscriptionParams params)
      throws Exception {
    Response response = giftSubscriptionRaw(params);

    return EstimateGiftSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /** createSubForCustomerEstimate a estimate (executes immediately) - returns raw Response. */
  Response createSubForCustomerEstimateRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/create_subscription_estimate", "customer-id", customerId);

    return get(path, null);
  }

  public EstimateCreateSubForCustomerEstimateResponse createSubForCustomerEstimate(
      String customerId) throws Exception {
    Response response = createSubForCustomerEstimateRaw(customerId);
    return EstimateCreateSubForCustomerEstimateResponse.fromJson(
        response.getBodyAsString(), response);
  }

  /**
   * createSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response createSubscriptionRaw(EstimateCreateSubscriptionParams params) throws Exception {

    return post("/estimates/create_subscription", params != null ? params.toFormData() : null);
  }

  /**
   * createSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response createSubscriptionRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/create_subscription", jsonPayload);
  }

  public EstimateCreateSubscriptionResponse createSubscription(
      EstimateCreateSubscriptionParams params) throws Exception {
    Response response = createSubscriptionRaw(params);

    return EstimateCreateSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }

  /**
   * createInvoice a estimate using immutable params (executes immediately) - returns raw Response.
   */
  Response createInvoiceRaw(EstimateCreateInvoiceParams params) throws Exception {

    return post("/estimates/create_invoice", params != null ? params.toFormData() : null);
  }

  /**
   * createInvoice a estimate using raw JSON payload (executes immediately) - returns raw Response.
   */
  Response createInvoiceRaw(String jsonPayload) throws Exception {

    return postJson("/estimates/create_invoice", jsonPayload);
  }

  public EstimateCreateInvoiceResponse createInvoice(EstimateCreateInvoiceParams params)
      throws Exception {
    Response response = createInvoiceRaw(params);

    return EstimateCreateInvoiceResponse.fromJson(response.getBodyAsString(), response);
  }

  /** cancelSubscription a estimate (executes immediately) - returns raw Response. */
  Response cancelSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_estimate",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * cancelSubscription a estimate using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response cancelSubscriptionRaw(String subscriptionId, EstimateCancelSubscriptionParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * cancelSubscription a estimate using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response cancelSubscriptionRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_subscription_estimate",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public EstimateCancelSubscriptionResponse cancelSubscription(
      String subscriptionId, EstimateCancelSubscriptionParams params) throws Exception {
    Response response = cancelSubscriptionRaw(subscriptionId, params);
    return EstimateCancelSubscriptionResponse.fromJson(response.getBodyAsString(), response);
  }
}
