/*
 * This file is auto-generated by Chargebee.
 * For more information on how to make changes to this file, please see the README.
 * Reach out to dx@chargebee.com for any questions.
 * Copyright 2025 Chargebee Inc.
 */

package com.chargebee.v4.core.services;

import com.chargebee.v4.client.ChargebeeClient;
import com.chargebee.v4.client.request.RequestOptions;
import com.chargebee.v4.transport.Response;

import com.chargebee.v4.core.models.subscription.params.SubscriptionRemoveAdvanceInvoiceScheduleParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionUpdateForItemsParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionRemoveCouponsParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionResumeParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionCancelForItemsParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionRegenerateInvoiceParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionListParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionCreateParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionMoveParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionSubscriptionsForCustomerParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionCreateForCustomerParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionImportForItemsParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionRemoveScheduledCancellationParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionReactivateParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionChargeFutureRenewalsParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionAddChargeAtTermEndParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionChangeTermEndParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionCreateWithItemsParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionImportUnbilledChargesParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionUpdateParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionImportContractTermParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionOverrideBillingProfileParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionEditAdvanceInvoiceScheduleParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionListDiscountsParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionContractTermsForSubscriptionParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionPauseParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionImportForCustomerParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionImportSubscriptionParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionCancelParams;

import com.chargebee.v4.core.models.subscription.params.SubscriptionChargeAddonAtTermEndParams;

import com.chargebee.v4.core.responses.subscription.SubscriptionRemoveAdvanceInvoiceScheduleResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionUpdateForItemsResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionRemoveCouponsResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionResumeResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionCancelForItemsResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionRegenerateInvoiceResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionListResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionCreateResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionMoveResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionSubscriptionsForCustomerResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionCreateForCustomerResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionImportForItemsResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionRetrieveAdvanceInvoiceScheduleResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionRemoveScheduledCancellationResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionRetrieveWithScheduledChangesResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionReactivateResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionChargeFutureRenewalsResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionAddChargeAtTermEndResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionRemoveScheduledChangesResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionChangeTermEndResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionDeleteResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionCreateWithItemsResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionImportUnbilledChargesResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionRemoveScheduledResumptionResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionRetrieveResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionUpdateResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionImportContractTermResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionOverrideBillingProfileResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionRemoveScheduledPauseResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionEditAdvanceInvoiceScheduleResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionListDiscountsResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionContractTermsForSubscriptionResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionPauseResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionImportForCustomerResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionImportSubscriptionResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionCancelResponse;

import com.chargebee.v4.core.responses.subscription.SubscriptionChargeAddonAtTermEndResponse;

public final class SubscriptionService extends BaseService<SubscriptionService> {

  private final ServiceConfig config;

  public SubscriptionService(ChargebeeClient client) {
    super(client);
    this.config = ServiceConfig.defaultConfig();
  }

  private SubscriptionService(ChargebeeClient client, RequestOptions options) {
    super(client, options);
    this.config = ServiceConfig.defaultConfig();
  }

  private SubscriptionService(
      ChargebeeClient client, RequestOptions options, ServiceConfig config) {
    super(client, options);
    this.config = config;
  }

  @Override
  SubscriptionService with(RequestOptions newOptions) {
    return new SubscriptionService(client, newOptions, config);
  }

  /**
   * Apply per-request options for this service instance. Users can chain .withOptions or .options
   * to set headers and other options.
   */
  public SubscriptionService withOptions(RequestOptions options) {
    return with(options);
  }

  // === Operations ===

  /** removeAdvanceInvoiceSchedule a subscription (executes immediately) - returns raw Response. */
  Response removeAdvanceInvoiceScheduleRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_advance_invoice_schedule",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * removeAdvanceInvoiceSchedule a subscription using immutable params (executes immediately) -
   * returns raw Response.
   */
  Response removeAdvanceInvoiceScheduleRaw(
      String subscriptionId, SubscriptionRemoveAdvanceInvoiceScheduleParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_advance_invoice_schedule",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * removeAdvanceInvoiceSchedule a subscription using raw JSON payload (executes immediately) -
   * returns raw Response.
   */
  Response removeAdvanceInvoiceScheduleRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_advance_invoice_schedule",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionRemoveAdvanceInvoiceScheduleResponse removeAdvanceInvoiceSchedule(
      String subscriptionId, SubscriptionRemoveAdvanceInvoiceScheduleParams params)
      throws Exception {
    Response response = removeAdvanceInvoiceScheduleRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionRemoveAdvanceInvoiceScheduleResponse.class);
  }

  /** updateForItems a subscription (executes immediately) - returns raw Response. */
  Response updateForItemsRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/update_for_items", "subscription-id", subscriptionId);

    return post(path, null);
  }

  /**
   * updateForItems a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response updateForItemsRaw(String subscriptionId, SubscriptionUpdateForItemsParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/update_for_items", "subscription-id", subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * updateForItems a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response updateForItemsRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/update_for_items", "subscription-id", subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionUpdateForItemsResponse updateForItems(
      String subscriptionId, SubscriptionUpdateForItemsParams params) throws Exception {
    Response response = updateForItemsRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionUpdateForItemsResponse.class);
  }

  /** removeCoupons a subscription (executes immediately) - returns raw Response. */
  Response removeCouponsRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_coupons", "subscription-id", subscriptionId);

    return post(path, null);
  }

  /**
   * removeCoupons a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response removeCouponsRaw(String subscriptionId, SubscriptionRemoveCouponsParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_coupons", "subscription-id", subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * removeCoupons a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response removeCouponsRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_coupons", "subscription-id", subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionRemoveCouponsResponse removeCoupons(
      String subscriptionId, SubscriptionRemoveCouponsParams params) throws Exception {
    Response response = removeCouponsRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionRemoveCouponsResponse.class);
  }

  /** resume a subscription (executes immediately) - returns raw Response. */
  Response resumeRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume", "subscription-id", subscriptionId);

    return post(path, null);
  }

  /** resume a subscription using immutable params (executes immediately) - returns raw Response. */
  Response resumeRaw(String subscriptionId, SubscriptionResumeParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume", "subscription-id", subscriptionId);
    return post(path, params.toFormData());
  }

  /** resume a subscription using raw JSON payload (executes immediately) - returns raw Response. */
  Response resumeRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/resume", "subscription-id", subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionResumeResponse resume(String subscriptionId, SubscriptionResumeParams params)
      throws Exception {
    Response response = resumeRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionResumeResponse.class);
  }

  /** cancelForItems a subscription (executes immediately) - returns raw Response. */
  Response cancelForItemsRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_for_items", "subscription-id", subscriptionId);

    return post(path, null);
  }

  /**
   * cancelForItems a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response cancelForItemsRaw(String subscriptionId, SubscriptionCancelForItemsParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_for_items", "subscription-id", subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * cancelForItems a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response cancelForItemsRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel_for_items", "subscription-id", subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionCancelForItemsResponse cancelForItems(
      String subscriptionId, SubscriptionCancelForItemsParams params) throws Exception {
    Response response = cancelForItemsRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionCancelForItemsResponse.class);
  }

  /** regenerateInvoice a subscription (executes immediately) - returns raw Response. */
  Response regenerateInvoiceRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * regenerateInvoice a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response regenerateInvoiceRaw(String subscriptionId, SubscriptionRegenerateInvoiceParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * regenerateInvoice a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response regenerateInvoiceRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/regenerate_invoice",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionRegenerateInvoiceResponse regenerateInvoice(
      String subscriptionId, SubscriptionRegenerateInvoiceParams params) throws Exception {
    Response response = regenerateInvoiceRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionRegenerateInvoiceResponse.class);
  }

  /** list a subscription using immutable params (executes immediately) - returns raw Response. */
  Response listRaw(SubscriptionListParams params) throws Exception {

    return get("/subscriptions", params != null ? params.toQueryParams() : null);
  }

  /** list a subscription without params (executes immediately) - returns raw Response. */
  Response listRaw() throws Exception {

    return get("/subscriptions", null);
  }

  /** list a subscription using raw JSON payload (executes immediately) - returns raw Response. */
  Response listRaw(String jsonPayload) throws Exception {

    throw new UnsupportedOperationException("JSON payload not supported for GET operations");
  }

  public SubscriptionListResponse list(SubscriptionListParams params) throws Exception {
    Response response = listRaw(params);

    return SubscriptionListResponse.fromJson(response.getBodyAsString(), this, params);
  }

  public SubscriptionListResponse list() throws Exception {
    Response response = listRaw();
    return SubscriptionListResponse.fromJson(response.getBodyAsString(), this, null);
  }

  /** create a subscription using immutable params (executes immediately) - returns raw Response. */
  Response createRaw(SubscriptionCreateParams params) throws Exception {

    return post("/subscriptions", params != null ? params.toFormData() : null);
  }

  /** create a subscription using raw JSON payload (executes immediately) - returns raw Response. */
  Response createRaw(String jsonPayload) throws Exception {

    return postJson("/subscriptions", jsonPayload);
  }

  public SubscriptionCreateResponse create(SubscriptionCreateParams params) throws Exception {
    Response response = createRaw(params);

    return parseResponse(response, SubscriptionCreateResponse.class);
  }

  /** move a subscription (executes immediately) - returns raw Response. */
  Response moveRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/move", "subscription-id", subscriptionId);

    return post(path, null);
  }

  /** move a subscription using immutable params (executes immediately) - returns raw Response. */
  Response moveRaw(String subscriptionId, SubscriptionMoveParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/move", "subscription-id", subscriptionId);
    return post(path, params.toFormData());
  }

  /** move a subscription using raw JSON payload (executes immediately) - returns raw Response. */
  Response moveRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/move", "subscription-id", subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionMoveResponse move(String subscriptionId, SubscriptionMoveParams params)
      throws Exception {
    Response response = moveRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionMoveResponse.class);
  }

  /**
   * subscriptionsForCustomer a subscription using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response subscriptionsForCustomerRaw(
      String customerId, SubscriptionSubscriptionsForCustomerParams params) throws Exception {
    String path =
        buildPathWithParams("/customers/{customer-id}/subscriptions", "customer-id", customerId);
    return get(path, params != null ? params.toQueryParams() : null);
  }

  /**
   * subscriptionsForCustomer a subscription without params (executes immediately) - returns raw
   * Response.
   */
  Response subscriptionsForCustomerRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams("/customers/{customer-id}/subscriptions", "customer-id", customerId);
    return get(path, null);
  }

  /**
   * subscriptionsForCustomer a subscription using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response subscriptionsForCustomerRaw(String customerId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams("/customers/{customer-id}/subscriptions", "customer-id", customerId);
    throw new UnsupportedOperationException("JSON payload not supported for GET operations");
  }

  public SubscriptionSubscriptionsForCustomerResponse subscriptionsForCustomer(
      String customerId, SubscriptionSubscriptionsForCustomerParams params) throws Exception {
    Response response = subscriptionsForCustomerRaw(customerId, params);
    return SubscriptionSubscriptionsForCustomerResponse.fromJson(
        response.getBodyAsString(), this, params, customerId);
  }

  public SubscriptionSubscriptionsForCustomerResponse subscriptionsForCustomer(String customerId)
      throws Exception {
    Response response = subscriptionsForCustomerRaw(customerId);
    return SubscriptionSubscriptionsForCustomerResponse.fromJson(
        response.getBodyAsString(), this, null, customerId);
  }

  /** createForCustomer a subscription (executes immediately) - returns raw Response. */
  Response createForCustomerRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams("/customers/{customer-id}/subscriptions", "customer-id", customerId);

    return post(path, null);
  }

  /**
   * createForCustomer a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response createForCustomerRaw(String customerId, SubscriptionCreateForCustomerParams params)
      throws Exception {
    String path =
        buildPathWithParams("/customers/{customer-id}/subscriptions", "customer-id", customerId);
    return post(path, params.toFormData());
  }

  /**
   * createForCustomer a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response createForCustomerRaw(String customerId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams("/customers/{customer-id}/subscriptions", "customer-id", customerId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionCreateForCustomerResponse createForCustomer(
      String customerId, SubscriptionCreateForCustomerParams params) throws Exception {
    Response response = createForCustomerRaw(customerId, params);
    return parseResponse(response, SubscriptionCreateForCustomerResponse.class);
  }

  /** importForItems a subscription (executes immediately) - returns raw Response. */
  Response importForItemsRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams("/customers/{customer-id}/import_for_items", "customer-id", customerId);

    return post(path, null);
  }

  /**
   * importForItems a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response importForItemsRaw(String customerId, SubscriptionImportForItemsParams params)
      throws Exception {
    String path =
        buildPathWithParams("/customers/{customer-id}/import_for_items", "customer-id", customerId);
    return post(path, params.toFormData());
  }

  /**
   * importForItems a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response importForItemsRaw(String customerId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams("/customers/{customer-id}/import_for_items", "customer-id", customerId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionImportForItemsResponse importForItems(
      String customerId, SubscriptionImportForItemsParams params) throws Exception {
    Response response = importForItemsRaw(customerId, params);
    return parseResponse(response, SubscriptionImportForItemsResponse.class);
  }

  /**
   * retrieveAdvanceInvoiceSchedule a subscription (executes immediately) - returns raw Response.
   */
  Response retrieveAdvanceInvoiceScheduleRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/retrieve_advance_invoice_schedule",
            "subscription-id",
            subscriptionId);

    return get(path, null);
  }

  public SubscriptionRetrieveAdvanceInvoiceScheduleResponse retrieveAdvanceInvoiceSchedule(
      String subscriptionId) throws Exception {
    Response response = retrieveAdvanceInvoiceScheduleRaw(subscriptionId);
    return parseResponse(response, SubscriptionRetrieveAdvanceInvoiceScheduleResponse.class);
  }

  /** removeScheduledCancellation a subscription (executes immediately) - returns raw Response. */
  Response removeScheduledCancellationRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_scheduled_cancellation",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * removeScheduledCancellation a subscription using immutable params (executes immediately) -
   * returns raw Response.
   */
  Response removeScheduledCancellationRaw(
      String subscriptionId, SubscriptionRemoveScheduledCancellationParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_scheduled_cancellation",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * removeScheduledCancellation a subscription using raw JSON payload (executes immediately) -
   * returns raw Response.
   */
  Response removeScheduledCancellationRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_scheduled_cancellation",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionRemoveScheduledCancellationResponse removeScheduledCancellation(
      String subscriptionId, SubscriptionRemoveScheduledCancellationParams params)
      throws Exception {
    Response response = removeScheduledCancellationRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionRemoveScheduledCancellationResponse.class);
  }

  /** retrieveWithScheduledChanges a subscription (executes immediately) - returns raw Response. */
  Response retrieveWithScheduledChangesRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/retrieve_with_scheduled_changes",
            "subscription-id",
            subscriptionId);

    return get(path, null);
  }

  public SubscriptionRetrieveWithScheduledChangesResponse retrieveWithScheduledChanges(
      String subscriptionId) throws Exception {
    Response response = retrieveWithScheduledChangesRaw(subscriptionId);
    return parseResponse(response, SubscriptionRetrieveWithScheduledChangesResponse.class);
  }

  /** reactivate a subscription (executes immediately) - returns raw Response. */
  Response reactivateRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/reactivate", "subscription-id", subscriptionId);

    return post(path, null);
  }

  /**
   * reactivate a subscription using immutable params (executes immediately) - returns raw Response.
   */
  Response reactivateRaw(String subscriptionId, SubscriptionReactivateParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/reactivate", "subscription-id", subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * reactivate a subscription using raw JSON payload (executes immediately) - returns raw Response.
   */
  Response reactivateRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/reactivate", "subscription-id", subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionReactivateResponse reactivate(
      String subscriptionId, SubscriptionReactivateParams params) throws Exception {
    Response response = reactivateRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionReactivateResponse.class);
  }

  /** chargeFutureRenewals a subscription (executes immediately) - returns raw Response. */
  Response chargeFutureRenewalsRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/charge_future_renewals",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * chargeFutureRenewals a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response chargeFutureRenewalsRaw(
      String subscriptionId, SubscriptionChargeFutureRenewalsParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/charge_future_renewals",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * chargeFutureRenewals a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response chargeFutureRenewalsRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/charge_future_renewals",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionChargeFutureRenewalsResponse chargeFutureRenewals(
      String subscriptionId, SubscriptionChargeFutureRenewalsParams params) throws Exception {
    Response response = chargeFutureRenewalsRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionChargeFutureRenewalsResponse.class);
  }

  /** addChargeAtTermEnd a subscription (executes immediately) - returns raw Response. */
  Response addChargeAtTermEndRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/add_charge_at_term_end",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * addChargeAtTermEnd a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response addChargeAtTermEndRaw(String subscriptionId, SubscriptionAddChargeAtTermEndParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/add_charge_at_term_end",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * addChargeAtTermEnd a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response addChargeAtTermEndRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/add_charge_at_term_end",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionAddChargeAtTermEndResponse addChargeAtTermEnd(
      String subscriptionId, SubscriptionAddChargeAtTermEndParams params) throws Exception {
    Response response = addChargeAtTermEndRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionAddChargeAtTermEndResponse.class);
  }

  /** removeScheduledChanges a subscription (executes immediately) - returns raw Response. */
  Response removeScheduledChangesRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_scheduled_changes",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  public SubscriptionRemoveScheduledChangesResponse removeScheduledChanges(String subscriptionId)
      throws Exception {
    Response response = removeScheduledChangesRaw(subscriptionId);
    return parseResponse(response, SubscriptionRemoveScheduledChangesResponse.class);
  }

  /** changeTermEnd a subscription (executes immediately) - returns raw Response. */
  Response changeTermEndRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end", "subscription-id", subscriptionId);

    return post(path, null);
  }

  /**
   * changeTermEnd a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response changeTermEndRaw(String subscriptionId, SubscriptionChangeTermEndParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end", "subscription-id", subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * changeTermEnd a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response changeTermEndRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/change_term_end", "subscription-id", subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionChangeTermEndResponse changeTermEnd(
      String subscriptionId, SubscriptionChangeTermEndParams params) throws Exception {
    Response response = changeTermEndRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionChangeTermEndResponse.class);
  }

  /** delete a subscription (executes immediately) - returns raw Response. */
  Response deleteRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/delete", "subscription-id", subscriptionId);

    return post(path, null);
  }

  public SubscriptionDeleteResponse delete(String subscriptionId) throws Exception {
    Response response = deleteRaw(subscriptionId);
    return parseResponse(response, SubscriptionDeleteResponse.class);
  }

  /** createWithItems a subscription (executes immediately) - returns raw Response. */
  Response createWithItemsRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/subscription_for_items", "customer-id", customerId);

    return post(path, null);
  }

  /**
   * createWithItems a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response createWithItemsRaw(String customerId, SubscriptionCreateWithItemsParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/subscription_for_items", "customer-id", customerId);
    return post(path, params.toFormData());
  }

  /**
   * createWithItems a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response createWithItemsRaw(String customerId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/subscription_for_items", "customer-id", customerId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionCreateWithItemsResponse createWithItems(
      String customerId, SubscriptionCreateWithItemsParams params) throws Exception {
    Response response = createWithItemsRaw(customerId, params);
    return parseResponse(response, SubscriptionCreateWithItemsResponse.class);
  }

  /** importUnbilledCharges a subscription (executes immediately) - returns raw Response. */
  Response importUnbilledChargesRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/import_unbilled_charges",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * importUnbilledCharges a subscription using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response importUnbilledChargesRaw(
      String subscriptionId, SubscriptionImportUnbilledChargesParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/import_unbilled_charges",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * importUnbilledCharges a subscription using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response importUnbilledChargesRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/import_unbilled_charges",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionImportUnbilledChargesResponse importUnbilledCharges(
      String subscriptionId, SubscriptionImportUnbilledChargesParams params) throws Exception {
    Response response = importUnbilledChargesRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionImportUnbilledChargesResponse.class);
  }

  /** removeScheduledResumption a subscription (executes immediately) - returns raw Response. */
  Response removeScheduledResumptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_scheduled_resumption",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  public SubscriptionRemoveScheduledResumptionResponse removeScheduledResumption(
      String subscriptionId) throws Exception {
    Response response = removeScheduledResumptionRaw(subscriptionId);
    return parseResponse(response, SubscriptionRemoveScheduledResumptionResponse.class);
  }

  /** retrieve a subscription (executes immediately) - returns raw Response. */
  Response retrieveRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams("/subscriptions/{subscription-id}", "subscription-id", subscriptionId);

    return get(path, null);
  }

  public SubscriptionRetrieveResponse retrieve(String subscriptionId) throws Exception {
    Response response = retrieveRaw(subscriptionId);
    return parseResponse(response, SubscriptionRetrieveResponse.class);
  }

  /** update a subscription (executes immediately) - returns raw Response. */
  Response updateRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams("/subscriptions/{subscription-id}", "subscription-id", subscriptionId);

    return post(path, null);
  }

  /** update a subscription using immutable params (executes immediately) - returns raw Response. */
  Response updateRaw(String subscriptionId, SubscriptionUpdateParams params) throws Exception {
    String path =
        buildPathWithParams("/subscriptions/{subscription-id}", "subscription-id", subscriptionId);
    return post(path, params.toFormData());
  }

  /** update a subscription using raw JSON payload (executes immediately) - returns raw Response. */
  Response updateRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams("/subscriptions/{subscription-id}", "subscription-id", subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionUpdateResponse update(String subscriptionId, SubscriptionUpdateParams params)
      throws Exception {
    Response response = updateRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionUpdateResponse.class);
  }

  /** importContractTerm a subscription (executes immediately) - returns raw Response. */
  Response importContractTermRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/import_contract_term",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * importContractTerm a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response importContractTermRaw(String subscriptionId, SubscriptionImportContractTermParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/import_contract_term",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * importContractTerm a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response importContractTermRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/import_contract_term",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionImportContractTermResponse importContractTerm(
      String subscriptionId, SubscriptionImportContractTermParams params) throws Exception {
    Response response = importContractTermRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionImportContractTermResponse.class);
  }

  /** overrideBillingProfile a subscription (executes immediately) - returns raw Response. */
  Response overrideBillingProfileRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/override_billing_profile",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * overrideBillingProfile a subscription using immutable params (executes immediately) - returns
   * raw Response.
   */
  Response overrideBillingProfileRaw(
      String subscriptionId, SubscriptionOverrideBillingProfileParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/override_billing_profile",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * overrideBillingProfile a subscription using raw JSON payload (executes immediately) - returns
   * raw Response.
   */
  Response overrideBillingProfileRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/override_billing_profile",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionOverrideBillingProfileResponse overrideBillingProfile(
      String subscriptionId, SubscriptionOverrideBillingProfileParams params) throws Exception {
    Response response = overrideBillingProfileRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionOverrideBillingProfileResponse.class);
  }

  /** removeScheduledPause a subscription (executes immediately) - returns raw Response. */
  Response removeScheduledPauseRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/remove_scheduled_pause",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  public SubscriptionRemoveScheduledPauseResponse removeScheduledPause(String subscriptionId)
      throws Exception {
    Response response = removeScheduledPauseRaw(subscriptionId);
    return parseResponse(response, SubscriptionRemoveScheduledPauseResponse.class);
  }

  /** editAdvanceInvoiceSchedule a subscription (executes immediately) - returns raw Response. */
  Response editAdvanceInvoiceScheduleRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/edit_advance_invoice_schedule",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * editAdvanceInvoiceSchedule a subscription using immutable params (executes immediately) -
   * returns raw Response.
   */
  Response editAdvanceInvoiceScheduleRaw(
      String subscriptionId, SubscriptionEditAdvanceInvoiceScheduleParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/edit_advance_invoice_schedule",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * editAdvanceInvoiceSchedule a subscription using raw JSON payload (executes immediately) -
   * returns raw Response.
   */
  Response editAdvanceInvoiceScheduleRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/edit_advance_invoice_schedule",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionEditAdvanceInvoiceScheduleResponse editAdvanceInvoiceSchedule(
      String subscriptionId, SubscriptionEditAdvanceInvoiceScheduleParams params) throws Exception {
    Response response = editAdvanceInvoiceScheduleRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionEditAdvanceInvoiceScheduleResponse.class);
  }

  /**
   * listDiscounts a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response listDiscountsRaw(String subscriptionId, SubscriptionListDiscountsParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/discounts", "subscription-id", subscriptionId);
    return get(path, params != null ? params.toQueryParams() : null);
  }

  /** listDiscounts a subscription without params (executes immediately) - returns raw Response. */
  Response listDiscountsRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/discounts", "subscription-id", subscriptionId);
    return get(path, null);
  }

  /**
   * listDiscounts a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response listDiscountsRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/discounts", "subscription-id", subscriptionId);
    throw new UnsupportedOperationException("JSON payload not supported for GET operations");
  }

  public SubscriptionListDiscountsResponse listDiscounts(
      String subscriptionId, SubscriptionListDiscountsParams params) throws Exception {
    Response response = listDiscountsRaw(subscriptionId, params);
    return SubscriptionListDiscountsResponse.fromJson(
        response.getBodyAsString(), this, params, subscriptionId);
  }

  public SubscriptionListDiscountsResponse listDiscounts(String subscriptionId) throws Exception {
    Response response = listDiscountsRaw(subscriptionId);
    return SubscriptionListDiscountsResponse.fromJson(
        response.getBodyAsString(), this, null, subscriptionId);
  }

  /**
   * contractTermsForSubscription a subscription using immutable params (executes immediately) -
   * returns raw Response.
   */
  Response contractTermsForSubscriptionRaw(
      String subscriptionId, SubscriptionContractTermsForSubscriptionParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/contract_terms", "subscription-id", subscriptionId);
    return get(path, params != null ? params.toQueryParams() : null);
  }

  /**
   * contractTermsForSubscription a subscription without params (executes immediately) - returns raw
   * Response.
   */
  Response contractTermsForSubscriptionRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/contract_terms", "subscription-id", subscriptionId);
    return get(path, null);
  }

  /**
   * contractTermsForSubscription a subscription using raw JSON payload (executes immediately) -
   * returns raw Response.
   */
  Response contractTermsForSubscriptionRaw(String subscriptionId, String jsonPayload)
      throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/contract_terms", "subscription-id", subscriptionId);
    throw new UnsupportedOperationException("JSON payload not supported for GET operations");
  }

  public SubscriptionContractTermsForSubscriptionResponse contractTermsForSubscription(
      String subscriptionId, SubscriptionContractTermsForSubscriptionParams params)
      throws Exception {
    Response response = contractTermsForSubscriptionRaw(subscriptionId, params);
    return SubscriptionContractTermsForSubscriptionResponse.fromJson(
        response.getBodyAsString(), this, params, subscriptionId);
  }

  public SubscriptionContractTermsForSubscriptionResponse contractTermsForSubscription(
      String subscriptionId) throws Exception {
    Response response = contractTermsForSubscriptionRaw(subscriptionId);
    return SubscriptionContractTermsForSubscriptionResponse.fromJson(
        response.getBodyAsString(), this, null, subscriptionId);
  }

  /** pause a subscription (executes immediately) - returns raw Response. */
  Response pauseRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause", "subscription-id", subscriptionId);

    return post(path, null);
  }

  /** pause a subscription using immutable params (executes immediately) - returns raw Response. */
  Response pauseRaw(String subscriptionId, SubscriptionPauseParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause", "subscription-id", subscriptionId);
    return post(path, params.toFormData());
  }

  /** pause a subscription using raw JSON payload (executes immediately) - returns raw Response. */
  Response pauseRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/pause", "subscription-id", subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionPauseResponse pause(String subscriptionId, SubscriptionPauseParams params)
      throws Exception {
    Response response = pauseRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionPauseResponse.class);
  }

  /** importForCustomer a subscription (executes immediately) - returns raw Response. */
  Response importForCustomerRaw(String customerId) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/import_subscription", "customer-id", customerId);

    return post(path, null);
  }

  /**
   * importForCustomer a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response importForCustomerRaw(String customerId, SubscriptionImportForCustomerParams params)
      throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/import_subscription", "customer-id", customerId);
    return post(path, params.toFormData());
  }

  /**
   * importForCustomer a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response importForCustomerRaw(String customerId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/customers/{customer-id}/import_subscription", "customer-id", customerId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionImportForCustomerResponse importForCustomer(
      String customerId, SubscriptionImportForCustomerParams params) throws Exception {
    Response response = importForCustomerRaw(customerId, params);
    return parseResponse(response, SubscriptionImportForCustomerResponse.class);
  }

  /**
   * importSubscription a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response importSubscriptionRaw(SubscriptionImportSubscriptionParams params) throws Exception {

    return post("/subscriptions/import_subscription", params != null ? params.toFormData() : null);
  }

  /**
   * importSubscription a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response importSubscriptionRaw(String jsonPayload) throws Exception {

    return postJson("/subscriptions/import_subscription", jsonPayload);
  }

  public SubscriptionImportSubscriptionResponse importSubscription(
      SubscriptionImportSubscriptionParams params) throws Exception {
    Response response = importSubscriptionRaw(params);

    return parseResponse(response, SubscriptionImportSubscriptionResponse.class);
  }

  /** cancel a subscription (executes immediately) - returns raw Response. */
  Response cancelRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel", "subscription-id", subscriptionId);

    return post(path, null);
  }

  /** cancel a subscription using immutable params (executes immediately) - returns raw Response. */
  Response cancelRaw(String subscriptionId, SubscriptionCancelParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel", "subscription-id", subscriptionId);
    return post(path, params.toFormData());
  }

  /** cancel a subscription using raw JSON payload (executes immediately) - returns raw Response. */
  Response cancelRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/cancel", "subscription-id", subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionCancelResponse cancel(String subscriptionId, SubscriptionCancelParams params)
      throws Exception {
    Response response = cancelRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionCancelResponse.class);
  }

  /** chargeAddonAtTermEnd a subscription (executes immediately) - returns raw Response. */
  Response chargeAddonAtTermEndRaw(String subscriptionId) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/charge_addon_at_term_end",
            "subscription-id",
            subscriptionId);

    return post(path, null);
  }

  /**
   * chargeAddonAtTermEnd a subscription using immutable params (executes immediately) - returns raw
   * Response.
   */
  Response chargeAddonAtTermEndRaw(
      String subscriptionId, SubscriptionChargeAddonAtTermEndParams params) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/charge_addon_at_term_end",
            "subscription-id",
            subscriptionId);
    return post(path, params.toFormData());
  }

  /**
   * chargeAddonAtTermEnd a subscription using raw JSON payload (executes immediately) - returns raw
   * Response.
   */
  Response chargeAddonAtTermEndRaw(String subscriptionId, String jsonPayload) throws Exception {
    String path =
        buildPathWithParams(
            "/subscriptions/{subscription-id}/charge_addon_at_term_end",
            "subscription-id",
            subscriptionId);
    return postJson(path, jsonPayload);
  }

  public SubscriptionChargeAddonAtTermEndResponse chargeAddonAtTermEnd(
      String subscriptionId, SubscriptionChargeAddonAtTermEndParams params) throws Exception {
    Response response = chargeAddonAtTermEndRaw(subscriptionId, params);
    return parseResponse(response, SubscriptionChargeAddonAtTermEndResponse.class);
  }
}
